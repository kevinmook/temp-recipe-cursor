{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _dayjs = _interopRequireDefault(require(\"dayjs\"));\n\nvar _EzTextInput = _interopRequireDefault(require(\"./EzTextInput\"));\n\nvar _EzDateInput = require(\"./EzDateInput.styles\");\n\nvar _EzCalendar = _interopRequireDefault(require(\"../EzCalendar/EzCalendar\"));\n\nvar _EzCombobox = require(\"./EzCombobox\");\n\nvar _hooks = require(\"../../utils/hooks\");\n\nvar _Icons = require(\"../Icons\");\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        (0, _defineProperty2[\"default\"])(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nvar CLOSE_CALENDAR_ON_SELECT_DELAY_MS = 100;\n\nvar EzDateInput = function EzDateInput(_ref) {\n  var id = _ref.id,\n      name = _ref.name,\n      disabled = _ref.disabled,\n      _onChange = _ref.onChange,\n      ariaLabelledBy = _ref['aria-labelledby'],\n      props = (0, _objectWithoutProperties2[\"default\"])(_ref, [\"id\", \"name\", \"disabled\", \"onChange\", \"aria-labelledby\"]);\n  var _props$placeholder = props.placeholder,\n      placeholder = _props$placeholder === void 0 ? 'Select date' : _props$placeholder;\n\n  var _useState = (0, _react.useState)(props.value),\n      _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n      value = _useState2[0],\n      setValue = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(null),\n      _useState4 = (0, _slicedToArray2[\"default\"])(_useState3, 2),\n      validDate = _useState4[0],\n      setValidDate = _useState4[1];\n\n  var comboboxState = (0, _EzCombobox.useComboboxState)();\n\n  var _useCombobox = (0, _EzCombobox.useCombobox)(comboboxState, _objectSpread({}, props, {\n    'aria-haspopup': true,\n    disabled: disabled,\n    opened: comboboxState.visible\n  })),\n      clickOutsideRef = _useCombobox.ref,\n      combobox = (0, _objectWithoutProperties2[\"default\"])(_useCombobox, [\"ref\"]);\n\n  var hide = comboboxState.hide,\n      visible = comboboxState.visible;\n  var timeout = (0, _react.useRef)(null);\n  (0, _react.useEffect)(function () {\n    return function () {\n      return clearTimeout(timeout.current);\n    };\n  }, []);\n  (0, _react.useEffect)(function () {\n    if ((0, _dayjs[\"default\"])(value).isValid()) setValidDate(value);\n  }, [value]);\n  (0, _hooks.useUpdateEffect)(function () {\n    _onChange(validDate);\n  }, [validDate, _onChange]);\n  var comboboxInput = (0, _EzCombobox.useComboboxInput)(comboboxState, {\n    id: id,\n    name: name,\n    value: value,\n    'aria-labelledby': ariaLabelledBy,\n    onChange: function onChange(e) {\n      setValue(e.target.value);\n\n      _onChange(e.target.value);\n    },\n    disabled: disabled,\n    placeholder: placeholder,\n    error: props.error,\n    touched: props.touched\n  });\n  var comboboxFlyout = (0, _EzCombobox.useComboboxFlyout)(comboboxState);\n  var minDate = props.minDate,\n      maxDate = props.maxDate,\n      filterDate = props.filterDate;\n  return _react[\"default\"].createElement(_EzDateInput.Container, {\n    ref: clickOutsideRef,\n    hasError: props.touched && props.error,\n    opened: visible\n  }, _react[\"default\"].createElement(_EzDateInput.Combobox, combobox, _react[\"default\"].createElement(_Icons.InsetIcon, {\n    insetY0: true,\n    left0: true,\n    pl3: true\n  }, _react[\"default\"].createElement(_Icons.CalendarIcon, null)), _react[\"default\"].createElement(_EzTextInput[\"default\"], comboboxInput), _react[\"default\"].createElement(_Icons.InsetIcon, {\n    insetY0: true,\n    right0: true,\n    pr2: true\n  }, _react[\"default\"].createElement(_Icons.ChevronIcon, {\n    flip: visible\n  }))), visible && _react[\"default\"].createElement(_EzDateInput.CalendarWrapper, (0, _extends2[\"default\"])({}, comboboxFlyout, {\n    onKeyDown: function onKeyDown(event) {\n      if (event.key === 'Escape') hide();\n    }\n  }), _react[\"default\"].createElement(_EzCalendar[\"default\"], (0, _extends2[\"default\"])({\n    minDate: minDate,\n    maxDate: maxDate,\n    filterDate: filterDate\n  }, {\n    value: validDate,\n    onChange: function onChange(date) {\n      setValue(date);\n      comboboxInput.ref.current.focus();\n      timeout.current = setTimeout(hide, CLOSE_CALENDAR_ON_SELECT_DELAY_MS);\n    }\n  }))));\n};\n\nvar _default = EzDateInput;\nexports[\"default\"] = _default;","map":null,"metadata":{},"sourceType":"script"}