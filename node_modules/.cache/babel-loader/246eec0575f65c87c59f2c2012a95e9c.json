{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _Dialog = require(\"reakit/Dialog\");\n\nvar _Portal = require(\"reakit/Portal\");\n\nvar _EzButton = _interopRequireDefault(require(\"../EzButton\"));\n\nvar _EzHeading = _interopRequireDefault(require(\"../EzHeading\"));\n\nvar _EzLayout = _interopRequireDefault(require(\"../EzLayout\"));\n\nvar _EzModal = require(\"./EzModal.styles\");\n\nvar _CloseButton = _interopRequireDefault(require(\"../CloseButton\"));\n\nvar _hooks = require(\"../../utils/hooks\");\n\nvar _EzPortal = _interopRequireWildcard(require(\"../EzPortal\"));\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        (0, _defineProperty2[\"default\"])(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nvar PortalledOverlay = function PortalledOverlay(_ref) {\n  var children = _ref.children,\n      props = (0, _objectWithoutProperties2[\"default\"])(_ref, [\"children\"]);\n  return _react[\"default\"].createElement(_EzPortal[\"default\"], null, _react[\"default\"].createElement(_EzModal.StyledOverlay, (0, _Dialog.useDialogBackdrop)(props), children));\n};\n\nvar Dialog = function Dialog(_ref2) {\n  var isOpen = _ref2.isOpen,\n      children = _ref2.children,\n      props = (0, _objectWithoutProperties2[\"default\"])(_ref2, [\"isOpen\", \"children\"]);\n\n  var _useContext = (0, _react.useContext)(_EzPortal.PortalContext),\n      hostNode = _useContext.current;\n\n  var initialFocusRef = (0, _react.useRef)();\n  var ref = (0, _react.useRef)();\n  (0, _react.useEffect)(function () {\n    if (isOpen) initialFocusRef.current = hostNode.ownerDocument.activeElement;\n  }, [hostNode, isOpen]);\n  var preventBodyScroll = hostNode === document.body;\n  var dialog = (0, _Dialog.useDialog)(_objectSpread({}, props, {\n    // eslint-disable-next-line @typescript-eslint/camelcase\n    unstable_finalFocusRef: initialFocusRef,\n    preventBodyScroll: preventBodyScroll\n  }), {\n    ref: ref\n  }); // eslint-disable-next-line no-underscore-dangle\n\n  _Portal.Portal.__selector = \"#\".concat(dialog.id);\n  return _react[\"default\"].createElement(_EzModal.StyledDialog, (0, _extends2[\"default\"])({}, dialog, {\n    tabIndex: 0\n  }), _react[\"default\"].createElement(_EzPortal.PortalContext.Provider, {\n    value: ref\n  }, props.visible && children));\n};\n\nvar EzModal = function EzModal(_ref3) {\n  var children = _ref3.children,\n      headerText = _ref3.headerText,\n      destructive = _ref3.destructive,\n      dismissLabel = _ref3.dismissLabel,\n      isOpen = _ref3.isOpen,\n      isSubmitting = _ref3.isSubmitting,\n      initialOnDismiss = _ref3.onDismiss,\n      onSubmit = _ref3.onSubmit,\n      submitLabel = _ref3.submitLabel;\n  var labelId = (0, _hooks.useUniqueId)(); // JSDOM doesn't support this API\n\n  var modalOption = {\n    modal: Boolean(Element.prototype.insertAdjacentElement)\n  };\n  var dialog = (0, _Dialog.useDialogState)(_objectSpread({\n    visible: isOpen\n  }, modalOption));\n\n  var _useRef = (0, _react.useRef)(initialOnDismiss),\n      onDismiss = _useRef.current;\n\n  dialog.hide = onDismiss;\n  dialog.visible = isOpen;\n  return _react[\"default\"].createElement(PortalledOverlay, dialog, _react[\"default\"].createElement(Dialog, (0, _extends2[\"default\"])({}, dialog, {\n    isOpen: isOpen,\n    \"aria-labelledby\": labelId\n  }), _react[\"default\"].createElement(_EzModal.HeaderContainer, null, _react[\"default\"].createElement(_EzHeading[\"default\"], {\n    size: \"2\",\n    id: labelId\n  }, headerText), _react[\"default\"].createElement(_CloseButton[\"default\"], {\n    label: dismissLabel,\n    onClick: onDismiss\n  })), _react[\"default\"].createElement(_EzModal.ContentContainer, null, children), _react[\"default\"].createElement(_EzModal.ButtonFooter, null, _react[\"default\"].createElement(_EzLayout[\"default\"], {\n    layout: {\n      base: 'stack',\n      medium: 'basic'\n    }\n  }, submitLabel && _react[\"default\"].createElement(_EzButton[\"default\"], {\n    use: \"primary\",\n    destructive: destructive,\n    onClick: onSubmit,\n    loading: isSubmitting\n  }, submitLabel), _react[\"default\"].createElement(_EzButton[\"default\"], {\n    use: \"secondary\",\n    disabled: isSubmitting,\n    onClick: onDismiss\n  }, dismissLabel)))));\n};\n\nvar _default = EzModal;\nexports[\"default\"] = _default;","map":null,"metadata":{},"sourceType":"script"}