"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _react = _interopRequireDefault(require("react"));

var _core = require("@emotion/core");

var _jestAxe = require("jest-axe");

var _sosia = require("sosia");

var _react2 = require("@testing-library/react");

var _EzButtonTest = _interopRequireDefault(require("./EzButton.test.md"));

var _EzButton = _interopRequireDefault(require("../EzButton"));

var _EzButton2 = _interopRequireDefault(require("../EzButton.md"));

var _index = require("../../index");

var _jestGlobals = require("../../../jest-globals");

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2["default"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

var scope = {
  EzButton: _EzButton["default"],
  EzLayout: _index.EzLayout,
  Global: _core.Global,
  css: _core.css
};
describe('EzButton', function () {
  (0, _sosia.visualSnapshots)({
    markdown: _EzButton2["default"],
    scope: scope
  });
  (0, _sosia.visualSnapshots)({
    markdown: _EzButtonTest["default"],
    scope: _objectSpread({}, scope, {
      fireEvent: _react2.fireEvent
    })
  });
  it('renders a button element by default', function () {
    var _fullRender = (0, _jestGlobals.fullRender)(_react["default"].createElement(_EzButton["default"], {
      use: "primary"
    }, "Click Me")),
        getByText = _fullRender.getByText;

    expect(getByText('Click Me').tagName).toEqual('BUTTON');
  });
  describe('disabled', function () {
    it('it disables the button element', function () {
      var _fullRender2 = (0, _jestGlobals.fullRender)(_react["default"].createElement(_EzButton["default"], {
        use: "primary",
        disabled: true
      }, "Click Me")),
          getByText = _fullRender2.getByText;

      expect(getByText('Click Me')).toHaveAttribute('disabled');
    });
  });
  describe('disabledMessage', function () {
    var tooltipText = 'Invalid form';
    it('wraps the button in a tooltip if a value is provided and the button is disabled', function () {
      var _fullRender3 = (0, _jestGlobals.fullRender)(_react["default"].createElement(_EzButton["default"], {
        use: "primary",
        disabled: true,
        disabledMessage: tooltipText
      }, "Submit")),
          container = _fullRender3.container,
          getByText = _fullRender3.getByText,
          getByRole = _fullRender3.getByRole;

      _react2.fireEvent.focus(container.querySelector('button'));

      var tooltip = getByRole('tooltip');
      expect(tooltip).toBeVisible();
      expect(getByText(tooltipText)).toBeDefined();
    });
    it('does not wrap the button in a tooltip if a value is provided and the button is not disabled', function () {
      var _fullRender4 = (0, _jestGlobals.fullRender)(_react["default"].createElement(_EzButton["default"], {
        use: "primary",
        disabledMessage: tooltipText
      }, "Submit")),
          container = _fullRender4.container,
          queryByRole = _fullRender4.queryByRole;

      _react2.fireEvent.focus(container.querySelector('button'));

      var tooltip = queryByRole('tooltip');
      expect(tooltip).toBeNull();
    });
  });
  describe('loading', function () {
    it('is applies the disabled attribute to the button element', function () {
      var _fullRender5 = (0, _jestGlobals.fullRender)(_react["default"].createElement(_EzButton["default"], {
        use: "primary",
        loading: true
      }, "Click Me")),
          getByText = _fullRender5.getByText;

      expect(getByText('Click Me')).toHaveAttribute('disabled');
    });
  });
  describe('data-* props', function () {
    var actual;
    beforeEach(function () {
      actual = (0, _jestGlobals.renderToHtml)(_react["default"].createElement(_EzButton["default"], {
        use: "primary",
        "data-test": "my-test-selector"
      }, "Click Me"));
    });
    it('renders valid props for html elements', function () {
      expect(actual).toContain('data-test="my-test-selector"');
    });
  });
  it('should meet accessibility guidelines for buttons',
  /*#__PURE__*/
  (0, _asyncToGenerator2["default"])(
  /*#__PURE__*/
  _regenerator["default"].mark(function _callee() {
    var wrapper, html;
    return _regenerator["default"].wrap(function _callee$(_context) {
      while (1) {
        switch (_context.prev = _context.next) {
          case 0:
            wrapper = (0, _jestGlobals.renderToHtml)(_react["default"].createElement(_EzButton["default"], {
              use: "primary"
            }, "Click Me"));
            _context.next = 3;
            return (0, _jestAxe.axe)(wrapper);

          case 3:
            html = _context.sent;
            expect(html).toHaveNoViolations();

          case 5:
          case "end":
            return _context.stop();
        }
      }
    }, _callee);
  })));
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL0V6QnV0dG9uL19fdGVzdHNfXy9FekJ1dHRvbi50ZXN0LnRzeCJdLCJuYW1lcyI6WyJzY29wZSIsIkV6QnV0dG9uIiwiRXpMYXlvdXQiLCJHbG9iYWwiLCJjc3MiLCJkZXNjcmliZSIsIm1hcmtkb3duIiwicmVncmVzc2lvblRlc3RzIiwiZmlyZUV2ZW50IiwiaXQiLCJnZXRCeVRleHQiLCJleHBlY3QiLCJ0YWdOYW1lIiwidG9FcXVhbCIsInRvSGF2ZUF0dHJpYnV0ZSIsInRvb2x0aXBUZXh0IiwiY29udGFpbmVyIiwiZ2V0QnlSb2xlIiwiZm9jdXMiLCJxdWVyeVNlbGVjdG9yIiwidG9vbHRpcCIsInRvQmVWaXNpYmxlIiwidG9CZURlZmluZWQiLCJxdWVyeUJ5Um9sZSIsInRvQmVOdWxsIiwiYWN0dWFsIiwiYmVmb3JlRWFjaCIsInRvQ29udGFpbiIsIndyYXBwZXIiLCJodG1sIiwidG9IYXZlTm9WaW9sYXRpb25zIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7OztBQUVBLElBQU1BLEtBQUssR0FBRztBQUFDQyxFQUFBQSxRQUFRLEVBQVJBLG9CQUFEO0FBQVdDLEVBQUFBLFFBQVEsRUFBUkEsZUFBWDtBQUFxQkMsRUFBQUEsTUFBTSxFQUFOQSxZQUFyQjtBQUE2QkMsRUFBQUEsR0FBRyxFQUFIQTtBQUE3QixDQUFkO0FBRUFDLFFBQVEsQ0FBQyxVQUFELEVBQWEsWUFBTTtBQUN6Qiw4QkFBZ0I7QUFBQ0MsSUFBQUEsUUFBUSxFQUFSQSxxQkFBRDtBQUFXTixJQUFBQSxLQUFLLEVBQUxBO0FBQVgsR0FBaEI7QUFDQSw4QkFBZ0I7QUFBQ00sSUFBQUEsUUFBUSxFQUFFQyx3QkFBWDtBQUE0QlAsSUFBQUEsS0FBSyxvQkFBTUEsS0FBTjtBQUFhUSxNQUFBQSxTQUFTLEVBQVRBO0FBQWI7QUFBakMs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LFFBQVEsQ0FBQyxjQUFELEVBQWlCLFlBQU07QUFDN0IsUUFBSW9CLE1BQUo7QUFDQUMsSUFBQUEsVUFBVSxDQUFDLFlBQU07QUFDZkQsTUFBQUEsTUFBTSxHQUFHLCtCQUNQLGdDQUFDLG9CQUFEO0FBQVUsUUFBQSxHQUFHLEVBQUMsU0FBZDtBQUF3QixxQkFBVTtBQUFsQyxvQkFETyxDQUFUO0FBS0QsS0FOUyxDQUFWO0FBT0FoQixJQUFBQSxFQUFFLENBQUMsdUNBQUQsRUFBMEMsWUFBTTtBQUNoREUsTUFBQUEsTUFBTSxDQUFDYyxNQUFELENBQU4sQ0FBZUUsU0FBZixDQUF5Qiw4QkFBekI7QUFDRCxLQUZDLENBQUY7QUFHRCxHQVpPLENBQVI7QUFjQWxCLEVBQUFBLEVBQUUsQ0FBQyxrREFBRDtBQUFBO0FBQUE7QUFBQTtBQUFBLCtCQUFxRDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDL0NtQixZQUFBQSxPQUQrQyxHQUNyQywrQkFBYSxnQ0FBQyxvQkFBRDtBQUFVLGNBQUEsR0FBRyxFQUFDO0FBQWQsMEJBQWIsQ0FEcUM7QUFBQTtBQUFBLG1CQUVsQyxrQkFBSUEsT0FBSixDQUZrQzs7QUFBQTtBQUUvQ0MsWUFBQUEsSUFGK0M7QUFHckRsQixZQUFBQSxNQUFNLENBQUNrQixJQUFELENBQU4sQ0FBYUMsa0JBQWI7O0FBSHFEO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEdBQXJELEdBQUY7QUFLRCxDQXBGTyxDQUFSIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7R2xvYmFsLCBjc3N9IGZyb20gJ0BlbW90aW9uL2NvcmUnO1xuaW1wb3J0IHtheGV9IGZyb20gJ2plc3QtYXhlJztcbmltcG9ydCB7dmlzdWFsU25hcHNob3RzfSBmcm9tICdzb3NpYSc7XG5pbXBvcnQge2ZpcmVFdmVudH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdCc7XG5pbXBvcnQgcmVncmVzc2lvblRlc3RzIGZyb20gJy4vRXpCdXR0b24udGVzdC5tZCc7XG5pbXBvcnQgRXpCdXR0b24gZnJvbSAnLi4vRXpCdXR0b24nO1xuaW1wb3J0IG1hcmtkb3duIGZyb20gJy4uL0V6QnV0dG9uLm1kJztcbmltcG9ydCB7RXpMYXlvdXR9IGZyb20gJy4uLy4uL2luZGV4JztcbmltcG9ydCB7ZnVsbFJlbmRlciwgcmVuZGVyVG9IdG1sfSBmcm9tICcuLi8uLi8uLi9qZXN0LWdsb2JhbHMnO1xuXG5jb25zdCBzY29wZSA9IHtFekJ1dHRvbiwgRXpMYXlvdXQsIEdsb2JhbCwgY3NzfTtcblxuZGVzY3JpYmUoJ0V6QnV0dG9uJywgKCkgPT4ge1xuICB2aXN1YWxTbmFwc2hvdHMoe21hcmtkb3duLCBzY29wZX0pO1xuICB2aXN1YWxTbmFwc2hvdHMoe21hcmtkb3duOiByZWdyZXNzaW9uVGVzdHMsIHNjb3BlOiB7Li4uc2NvcGUsIGZpcmVFdmVudH19KTtcblxuICBpdCgncmVuZGVycyBhIGJ1dHRvbiBlbGVtZW50IGJ5IGRlZmF1bHQnLCAoKSA9PiB7XG4gICAgY29uc3Qge2dldEJ5VGV4dH0gPSBmdWxsUmVuZGVyKDxFekJ1dHRvbiB1c2U9XCJwcmltYXJ5XCI+Q2xpY2sgTWU8L0V6QnV0dG9uPik7XG4gICAgZXhwZWN0KGdldEJ5VGV4dCgnQ2xpY2sgTWUnKS50YWdOYW1lKS50b0VxdWFsKCdCVVRUT04nKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2Rpc2FibGVkJywgKCkgPT4ge1xuICAgIGl0KCdpdCBkaXNhYmxlcyB0aGUgYnV0dG9uIGVsZW1lbnQnLCAoKSA9PiB7XG4gICAgICBjb25zdCB7Z2V0QnlUZXh0fSA9IGZ1bGxSZW5kZXIoXG4gICAgICAgIDxFekJ1dHRvbiB1c2U9XCJwcmltYXJ5XCIgZGlzYWJsZWQ+XG4gICAgICAgICAgQ2xpY2sgTWVcbiAgICAgICAgPC9FekJ1dHRvbj5cbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChnZXRCeVRleHQoJ0NsaWNrIE1lJykpLnRvSGF2ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2Rpc2FibGVkTWVzc2FnZScsICgpID0+IHtcbiAgICBjb25zdCB0b29sdGlwVGV4dCA9ICdJbnZhbGlkIGZvcm0nO1xuXG4gICAgaXQoJ3dyYXBzIHRoZSBidXR0b24gaW4gYSB0b29sdGlwIGlmIGEgdmFsdWUgaXMgcHJvdmlkZWQgYW5kIHRoZSBidXR0b24gaXMgZGlzYWJsZWQnLCAoKSA9PiB7XG4gICAgICBjb25zdCB7Y29udGFpbmVyLCBnZXRCeVRleHQsIGdldEJ5Um9sZX0gPSBmdWxsUmVuZGVyKFxuICAgICAgICA8RXpCdXR0b24gdXNlPVwicHJpbWFyeVwiIGRpc2FibGVkIGRpc2FibGVkTWVzc2FnZT17dG9vbHRpcFRleHR9PlxuICAgICAgICAgIFN1Ym1pdFxuICAgICAgICA8L0V6QnV0dG9uPlxuICAgICAgKTtcblxuICAgICAgZmlyZUV2ZW50LmZvY3VzKGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdidXR0b24nKSk7XG5cbiAgICAgIGNvbnN0IHRvb2x0aXAgPSBnZXRCeVJvbGUoJ3Rvb2x0aXAnKTtcblxuICAgICAgZXhwZWN0KHRvb2x0aXApLnRvQmVWaXNpYmxlKCk7XG4gICAgICBleHBlY3QoZ2V0QnlUZXh0KHRvb2x0aXBUZXh0KSkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdkb2VzIG5vdCB3cmFwIHRoZSBidXR0b24gaW4gYSB0b29sdGlwIGlmIGEgdmFsdWUgaXMgcHJvdmlkZWQgYW5kIHRoZSBidXR0b24gaXMgbm90IGRpc2FibGVkJywgKCkgPT4ge1xuICAgICAgY29uc3Qge2NvbnRhaW5lciwgcXVlcnlCeVJvbGV9ID0gZnVsbFJlbmRlcihcbiAgICAgICAgPEV6QnV0dG9uIHVzZT1cInByaW1hcnlcIiBkaXNhYmxlZE1lc3NhZ2U9e3Rvb2x0aXBUZXh0fT5cbiAgICAgICAgICBTdWJtaXRcbiAgICAgICAgPC9FekJ1dHRvbj5cbiAgICAgICk7XG5cbiAgICAgIGZpcmVFdmVudC5mb2N1cyhjb250YWluZXIucXVlcnlTZWxlY3RvcignYnV0dG9uJykpO1xuXG4gICAgICBjb25zdCB0b29sdGlwID0gcXVlcnlCeVJvbGUoJ3Rvb2x0aXAnKTtcbiAgICAgIGV4cGVjdCh0b29sdGlwKS50b0JlTnVsbCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnbG9hZGluZycsICgpID0+IHtcbiAgICBpdCgnaXMgYXBwbGllcyB0aGUgZGlzYWJsZWQgYXR0cmlidXRlIHRvIHRoZSBidXR0b24gZWxlbWVudCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHtnZXRCeVRleHR9ID0gZnVsbFJlbmRlcihcbiAgICAgICAgPEV6QnV0dG9uIHVzZT1cInByaW1hcnlcIiBsb2FkaW5nPlxuICAgICAgICAgIENsaWNrIE1lXG4gICAgICAgIDwvRXpCdXR0b24+XG4gICAgICApO1xuXG4gICAgICBleHBlY3QoZ2V0QnlUZXh0KCdDbGljayBNZScpKS50b0hhdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdkYXRhLSogcHJvcHMnLCAoKSA9PiB7XG4gICAgbGV0IGFjdHVhbDtcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIGFjdHVhbCA9IHJlbmRlclRvSHRtbChcbiAgICAgICAgPEV6QnV0dG9uIHVzZT1cInByaW1hcnlcIiBkYXRhLXRlc3Q9XCJteS10ZXN0LXNlbGVjdG9yXCI+XG4gICAgICAgICAgQ2xpY2sgTWVcbiAgICAgICAgPC9FekJ1dHRvbj5cbiAgICAgICk7XG4gICAgfSk7XG4gICAgaXQoJ3JlbmRlcnMgdmFsaWQgcHJvcHMgZm9yIGh0bWwgZWxlbWVudHMnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoYWN0dWFsKS50b0NvbnRhaW4oJ2RhdGEtdGVzdD1cIm15LXRlc3Qtc2VsZWN0b3JcIicpO1xuICAgIH0pO1xuICB9KTtcblxuICBpdCgnc2hvdWxkIG1lZXQgYWNjZXNzaWJpbGl0eSBndWlkZWxpbmVzIGZvciBidXR0b25zJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHdyYXBwZXIgPSByZW5kZXJUb0h0bWwoPEV6QnV0dG9uIHVzZT1cInByaW1hcnlcIj5DbGljayBNZTwvRXpCdXR0b24+KTtcbiAgICBjb25zdCBodG1sID0gYXdhaXQgYXhlKHdyYXBwZXIpO1xuICAgIGV4cGVjdChodG1sKS50b0hhdmVOb1Zpb2xhdGlvbnMoKTtcbiAgfSk7XG59KTtcbiJdfQ==