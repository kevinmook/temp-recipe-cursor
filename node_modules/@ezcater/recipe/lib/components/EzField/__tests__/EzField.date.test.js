"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _react = _interopRequireDefault(require("react"));

var _sosia = require("sosia");

var _dayjs = _interopRequireDefault(require("dayjs"));

var _react2 = require("@testing-library/react");

var _EzDateInputTest = _interopRequireDefault(require("./EzDateInput.test.md"));

var _EzField = _interopRequireDefault(require("../EzField"));

var _jestGlobals = require("../../../jest-globals");

var _index = require("../../index");

var _Open = _interopRequireDefault(require("../Open"));

var _Media = _interopRequireDefault(require("../Media"));

var scope = {
  EzField: _EzField["default"],
  EzLayout: _index.EzLayout,
  EzFormLayout: _index.EzFormLayout,
  Open: _Open["default"],
  Media: _Media["default"]
};
describe('EzField', function () {
  (0, _sosia.visualSnapshots)({
    markdown: _EzDateInputTest["default"],
    scope: scope
  });
  describe('date picker', function () {
    var inputLabel = 'Select delivery date';
    afterEach(jest.useRealTimers);
    it('should show calendar on click', function () {
      var _render = (0, _jestGlobals.fullRender)(_react["default"].createElement(_EzField["default"], {
        type: "date",
        value: "01/01/2019",
        label: inputLabel
      })),
          container = _render.container;

      _react2.fireEvent.mouseDown((0, _react2.getByLabelText)(container, inputLabel));

      expect(container).toHaveTextContent('January 2019');
    });
    it('should show calendar on current date if value is empty', function () {
      var _render2 = (0, _jestGlobals.fullRender)(_react["default"].createElement(_EzField["default"], {
        type: "date",
        value: "",
        label: inputLabel
      })),
          container = _render2.container;

      _react2.fireEvent.mouseDown((0, _react2.getByLabelText)(container, inputLabel));

      expect(container).toHaveTextContent((0, _dayjs["default"])().format('MMMM YYYY'));
    });
    it('should decrement month on calendar', function () {
      var _render3 = (0, _jestGlobals.fullRender)(_react["default"].createElement(_EzField["default"], {
        type: "date",
        value: "01/01/2019",
        label: inputLabel
      })),
          container = _render3.container;

      _react2.fireEvent.mouseDown((0, _react2.getByLabelText)(container, inputLabel));

      _react2.fireEvent.click((0, _react2.getByText)(container, /Prev/));

      expect(container).toHaveTextContent('December 2018');
    });
    it('should increment month on calendar', function () {
      var _render4 = (0, _jestGlobals.fullRender)(_react["default"].createElement(_EzField["default"], {
        type: "date",
        value: "01/01/2019",
        label: inputLabel
      })),
          container = _render4.container;

      _react2.fireEvent.mouseDown((0, _react2.getByLabelText)(container, inputLabel));

      _react2.fireEvent.click((0, _react2.getByText)(container, /Next/));

      expect(container).toHaveTextContent('February 2019');
    });
    it('should change dates by pressing the left arrow on calendar', function () {
      var _render5 = (0, _jestGlobals.fullRender)(_react["default"].createElement(_EzField["default"], {
        type: "date",
        value: "01/01/2019",
        label: inputLabel
      })),
          container = _render5.container;

      _react2.fireEvent.mouseDown((0, _react2.getByLabelText)(container, inputLabel));

      _react2.fireEvent.keyDown((0, _react2.getByText)(container, '1'), {
        key: 'ArrowLeft'
      });

      expect(container).toHaveTextContent('December 2018');
    });
    it('should change dates by pressing the right arrow on calendar', function () {
      var _render6 = (0, _jestGlobals.fullRender)(_react["default"].createElement(_EzField["default"], {
        type: "date",
        value: "01/01/2019",
        label: inputLabel
      })),
          container = _render6.container;

      _react2.fireEvent.mouseDown((0, _react2.getByLabelText)(container, inputLabel));

      _react2.fireEvent.keyDown((0, _react2.getByText)(container, '1'), {
        key: 'ArrowRight'
      });

      expect((0, _react2.getByText)(container, '2').getAttribute('tabindex')).toBe('0');
    });
    it('should change dates by pressing the down arrow on calendar', function () {
      var _render7 = (0, _jestGlobals.fullRender)(_react["default"].createElement(_EzField["default"], {
        type: "date",
        value: "01/01/2019",
        label: inputLabel
      })),
          container = _render7.container;

      _react2.fireEvent.mouseDown((0, _react2.getByLabelText)(container, inputLabel));

      _react2.fireEvent.keyDown((0, _react2.getByText)(container, '1'), {
        key: 'ArrowDown'
      });

      expect((0, _react2.getByText)(container, '8').getAttribute('tabindex')).toBe('0');
    });
    it('should change dates by pressing the up arrow on calendar', function () {
      var _render8 = (0, _jestGlobals.fullRender)(_react["default"].createElement(_EzField["default"], {
        type: "date",
        value: "01/01/2019",
        label: inputLabel
      })),
          container = _render8.container;

      _react2.fireEvent.mouseDown((0, _react2.getByLabelText)(container, inputLabel));

      _react2.fireEvent.keyDown((0, _react2.getByText)(container, '1'), {
        key: 'ArrowUp'
      });

      expect((0, _react2.getByText)(container, '25').getAttribute('tabindex')).toBe('0');
      expect(container).toHaveTextContent('December 2018');
    });
    it('should select change dates by pressing the enter key on calendar',
    /*#__PURE__*/
    (0, _asyncToGenerator2["default"])(
    /*#__PURE__*/
    _regenerator["default"].mark(function _callee() {
      var _render9, container;

      return _regenerator["default"].wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              jest.useFakeTimers();
              _render9 = (0, _jestGlobals.fullRender)(_react["default"].createElement(_EzField["default"], {
                type: "date",
                value: "01/01/2019",
                label: inputLabel
              })), container = _render9.container;

              _react2.fireEvent.mouseDown((0, _react2.getByLabelText)(container, inputLabel));

              _react2.fireEvent.keyDown((0, _react2.getByText)(container, '1'), {
                key: 'ArrowRight'
              }); // Day


              _react2.fireEvent.keyDown((0, _react2.getByText)(container, '2'), {
                key: 'ArrowRight'
              }); // Day


              _react2.fireEvent.keyDown((0, _react2.getByText)(container, '3'), {
                key: 'ArrowRight'
              }); // Day


              _react2.fireEvent.keyDown((0, _react2.getByText)(container, '4'), {
                key: 'ArrowRight'
              }); // Day


              _react2.fireEvent.keyDown((0, _react2.getByText)(container, '5'), {
                key: 'Enter'
              });

              (0, _react2.act)(jest.runAllTimers);

              _react2.fireEvent.mouseDown((0, _react2.getByLabelText)(container, inputLabel));

              expect((0, _react2.getByText)(container, '5').getAttribute('tabindex')).toBe('0');

            case 11:
            case "end":
              return _context.stop();
          }
        }
      }, _callee);
    })));
    it('should select change dates by pressing the space key on calendar',
    /*#__PURE__*/
    (0, _asyncToGenerator2["default"])(
    /*#__PURE__*/
    _regenerator["default"].mark(function _callee2() {
      var _render10, container;

      return _regenerator["default"].wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              jest.useFakeTimers();
              _render10 = (0, _jestGlobals.fullRender)(_react["default"].createElement(_EzField["default"], {
                type: "date",
                value: "01/01/2019",
                label: inputLabel
              })), container = _render10.container;

              _react2.fireEvent.mouseDown((0, _react2.getByLabelText)(container, inputLabel));

              _react2.fireEvent.keyDown((0, _react2.getByText)(container, '1'), {
                key: 'ArrowRight'
              }); // Day


              _react2.fireEvent.keyDown((0, _react2.getByText)(container, '2'), {
                key: 'ArrowRight'
              }); // Day


              _react2.fireEvent.keyDown((0, _react2.getByText)(container, '3'), {
                key: 'ArrowRight'
              }); // Day


              _react2.fireEvent.keyDown((0, _react2.getByText)(container, '4'), {
                key: 'ArrowRight'
              }); // Day


              _react2.fireEvent.keyDown((0, _react2.getByText)(container, '5'), {
                key: 'Space'
              });

              (0, _react2.act)(jest.runAllTimers);

              _react2.fireEvent.mouseDown((0, _react2.getByLabelText)(container, inputLabel));

              expect((0, _react2.getByText)(container, '5').getAttribute('tabindex')).toBe('0');

            case 11:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2);
    })));
    it('should fire onchange when day is typed', function () {
      var handleChange = jest.fn();

      var _render11 = (0, _jestGlobals.fullRender)(_react["default"].createElement(_EzField["default"], {
        type: "date",
        value: "01/01/2019",
        label: inputLabel,
        onChange: handleChange
      })),
          container = _render11.container;

      _react2.fireEvent.mouseDown((0, _react2.getByLabelText)(container, inputLabel));

      var input = container.querySelector('input');
      (0, _react2.act)(function () {
        _react2.fireEvent.change(input, {
          target: {
            value: '02/01/2019'
          }
        });
      });
      expect(handleChange).toHaveBeenCalled();
    });
    it('should fire onchange when day is clicked',
    /*#__PURE__*/
    (0, _asyncToGenerator2["default"])(
    /*#__PURE__*/
    _regenerator["default"].mark(function _callee3() {
      var handleChange, _render12, container;

      return _regenerator["default"].wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              handleChange = jest.fn();
              _render12 = (0, _jestGlobals.fullRender)(_react["default"].createElement(_EzField["default"], {
                type: "date",
                value: "01/01/2019",
                label: inputLabel,
                onChange: handleChange
              })), container = _render12.container;

              _react2.fireEvent.mouseDown((0, _react2.getByLabelText)(container, inputLabel));

              (0, _react2.act)(function () {
                _react2.fireEvent.click((0, _react2.getByText)(container, '5'));
              });
              expect(handleChange).toHaveBeenCalled();

            case 5:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3);
    })));
    it('should hide calendar when day is clicked', function () {
      jest.useFakeTimers();

      var _render13 = (0, _jestGlobals.fullRender)(_react["default"].createElement(_EzField["default"], {
        type: "date",
        value: "01/01/2019",
        label: inputLabel
      })),
          container = _render13.container;

      _react2.fireEvent.mouseDown((0, _react2.getByLabelText)(container, inputLabel));

      expect(container).toHaveTextContent('January 2019');
      (0, _react2.act)(function () {
        _react2.fireEvent.click((0, _react2.getByText)(container, '1'));
      }); // Calendar is still visible for 100 milliseconds to make clicking feel more solid

      expect(container).toHaveTextContent('January 2019'); // Fast-forward until all timers have been executed

      (0, _react2.act)(jest.runAllTimers);
      expect(container).not.toHaveTextContent('January 2019');
    });
    it('should ignore clicks and enter key on disabled dates', function () {
      jest.useFakeTimers();

      var _render14 = (0, _jestGlobals.fullRender)(_react["default"].createElement(_EzField["default"], {
        type: "date",
        value: "01/20/2020",
        minDate: '01/20/2020',
        maxDate: '01/24/2020',
        label: inputLabel
      })),
          container = _render14.container; // open the calendar picker


      _react2.fireEvent.mouseDown((0, _react2.getByLabelText)(container, inputLabel));

      expect(container).toHaveTextContent('January 2020'); // click on a date that is before the minDate

      (0, _react2.act)(function () {
        _react2.fireEvent.click((0, _react2.getByText)(container, '15'));
      }); // Fast-forward until all timers have been executed

      (0, _react2.act)(jest.runAllTimers); // assert calendar is still open

      expect(container).toHaveTextContent('January 2020'); // now try selecting the disabled date with the keyboard

      (0, _react2.act)(function () {
        _react2.fireEvent.keyDown((0, _react2.getByText)(container, '20'), {
          key: 'ArrowLeft'
        });

        _react2.fireEvent.keyDown((0, _react2.getByText)(container, '19'), {
          key: 'Enter'
        });
      }); // Fast-forward until all timers have been executed

      (0, _react2.act)(jest.runAllTimers); // assert calendar is still open

      expect(container).toHaveTextContent('January 2020');
    });
    it('should hide calendar on escape', function () {
      var _render15 = (0, _jestGlobals.fullRender)(_react["default"].createElement(_EzField["default"], {
        type: "date",
        value: "01/01/2019",
        label: inputLabel
      })),
          container = _render15.container;

      _react2.fireEvent.mouseDown((0, _react2.getByLabelText)(container, inputLabel));

      expect(container).toHaveTextContent('January 2019');

      _react2.fireEvent.keyDown((0, _react2.getByLabelText)(container, inputLabel), {
        key: 'Escape'
      });

      expect(container).not.toHaveTextContent('January 2019');

      _react2.fireEvent.mouseDown((0, _react2.getByLabelText)(container, inputLabel));

      expect(container).toHaveTextContent('January 2019'); // press escape when focused on a day

      _react2.fireEvent.keyDown((0, _react2.getByText)(container, '3'), {
        key: 'Escape'
      });

      expect(container).not.toHaveTextContent('January 2019');
    });
    it('should hide calendar on click outside',
    /*#__PURE__*/
    (0, _asyncToGenerator2["default"])(
    /*#__PURE__*/
    _regenerator["default"].mark(function _callee4() {
      var _render16, container;

      return _regenerator["default"].wrap(function _callee4$(_context4) {
        while (1) {
          switch (_context4.prev = _context4.next) {
            case 0:
              _render16 = (0, _jestGlobals.fullRender)(_react["default"].createElement(_react["default"].Fragment, null, _react["default"].createElement("button", {
                type: "button"
              }, "Outside Button"), _react["default"].createElement(_EzField["default"], {
                type: "date",
                value: "01/01/2019",
                label: inputLabel
              }))), container = _render16.container;

              _react2.fireEvent.mouseDown((0, _react2.getByLabelText)(container, inputLabel));

              expect(container).toHaveTextContent('January 2019');

              _react2.fireEvent.mouseDown((0, _react2.getByText)(container, /Outside Button/));

              expect(container).not.toHaveTextContent('January 2019');

            case 5:
            case "end":
              return _context4.stop();
          }
        }
      }, _callee4);
    })));
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL0V6RmllbGQvX190ZXN0c19fL0V6RmllbGQuZGF0ZS50ZXN0LnRzeCJdLCJuYW1lcyI6WyJzY29wZSIsIkV6RmllbGQiLCJFekxheW91dCIsIkV6Rm9ybUxheW91dCIsIk9wZW4iLCJNZWRpYSIsImRlc2NyaWJlIiwibWFya2Rvd24iLCJlekRhdGVJbnB1dFRlc3RzIiwiaW5wdXRMYWJlbCIsImFmdGVyRWFjaCIsImplc3QiLCJ1c2VSZWFsVGltZXJzIiwiaXQiLCJjb250YWluZXIiLCJmaXJlRXZlbnQiLCJtb3VzZURvd24iLCJleHBlY3QiLCJ0b0hhdmVUZXh0Q29udGVudCIsImZvcm1hdCIsImNsaWNrIiwia2V5RG93biIsImtleSIsImdldEF0dHJpYnV0ZSIsInRvQmUiLCJ1c2VGYWtlVGltZXJzIiwicnVuQWxsVGltZXJzIiwiaGFuZGxlQ2hhbmdlIiwiZm4iLCJpbnB1dCIsInF1ZXJ5U2VsZWN0b3IiLCJjaGFuZ2UiLCJ0YXJnZXQiLCJ2YWx1ZSIsInRvSGF2ZUJlZW5DYWxsZWQiLCJub3QiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUEsSUFBTUEsS0FBSyxHQUFHO0FBQUNDLEVBQUFBLE9BQU8sRUFBUEEsbUJBQUQ7QUFBVUMsRUFBQUEsUUFBUSxFQUFSQSxlQUFWO0FBQW9CQyxFQUFBQSxZQUFZLEVBQVpBLG1CQUFwQjtBQUFrQ0MsRUFBQUEsSUFBSSxFQUFKQSxnQkFBbEM7QUFBd0NDLEVBQUFBLEtBQUssRUFBTEE7QUFBeEMsQ0FBZDtBQUVBQyxRQUFRLENBQUMsU0FBRCxFQUFZLFlBQU07QUFDeEIsOEJBQWdCO0FBQUNDLElBQUFBLFFBQVEsRUFBRUMsMkJBQVg7QUFBNkJSLElBQUFBLEtBQUssRUFBTEE7QUFBN0IsR0FBaEI7QUFFQU0sRUFBQUEsUUFBUSxDQUFDLGFBQUQsRUFBZ0Is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QWtCcUIsR0FBbEIsQ0FBc0JqQixpQkFBdEIsQ0FBd0MsY0FBeEM7QUFDRCxLQW5CQyxDQUFGO0FBb0JBTCxJQUFBQSxFQUFFLENBQUMsdUNBQUQ7QUFBQTtBQUFBO0FBQUE7QUFBQSxpQ0FBMEM7QUFBQTs7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLDBCQUN0Qiw2QkFDbEIsa0VBQ0U7QUFBUSxnQkFBQSxJQUFJLEVBQUM7QUFBYixrQ0FERixFQUVFLGdDQUFDLG1CQUFEO0FBQVMsZ0JBQUEsSUFBSSxFQUFDLE1BQWQ7QUFBcUIsZ0JBQUEsS0FBSyxFQUFDLFlBQTNCO0FBQXdDLGdCQUFBLEtBQUssRUFBRUo7QUFBL0MsZ0JBRkYsQ0FEa0IsQ0FEc0IsRUFDbkNLLFNBRG1DLGFBQ25DQSxTQURtQzs7QUFRMUNDLGdDQUFVQyxTQUFWLENBQW9CLDRCQUFlRixTQUFmLEVBQTBCTCxVQUExQixDQUFwQjs7QUFFQVEsY0FBQUEsTUFBTSxDQUFDSCxTQUFELENBQU4sQ0FBa0JJLGlCQUFsQixDQUFvQyxjQUFwQzs7QUFFQUgsZ0NBQVVDLFNBQVYsQ0FBb0IsdUJBQVVGLFNBQVYsRUFBcUIsZ0JBQXJCLENBQXBCOztBQUVBRyxjQUFBQSxNQUFNLENBQUNILFNBQUQsQ0FBTixDQUFrQnFCLEdBQWxCLENBQXNCakIsaUJBQXRCLENBQXdDLGNBQXhDOztBQWQwQztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxLQUExQyxHQUFGO0FBZ0JELEdBeE9PLENBQVI7QUF5T0QsQ0E1T08sQ0FBUiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQge3Zpc3VhbFNuYXBzaG90c30gZnJvbSAnc29zaWEnO1xuaW1wb3J0IGRheWpzIGZyb20gJ2RheWpzJztcbmltcG9ydCB7Z2V0QnlMYWJlbFRleHQsIGdldEJ5VGV4dCwgZmlyZUV2ZW50LCBhY3R9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnO1xuaW1wb3J0IGV6RGF0ZUlucHV0VGVzdHMgZnJvbSAnLi9FekRhdGVJbnB1dC50ZXN0Lm1kJztcbmltcG9ydCBFekZpZWxkIGZyb20gJy4uL0V6RmllbGQnO1xuaW1wb3J0IHtmdWxsUmVuZGVyIGFzIHJlbmRlcn0gZnJvbSAnLi4vLi4vLi4vamVzdC1nbG9iYWxzJztcbmltcG9ydCB7RXpGb3JtTGF5b3V0LCBFekxheW91dH0gZnJvbSAnLi4vLi4vaW5kZXgnO1xuaW1wb3J0IE9wZW4gZnJvbSAnLi4vT3Blbic7XG5pbXBvcnQgTWVkaWEgZnJvbSAnLi4vTWVkaWEnO1xuXG5jb25zdCBzY29wZSA9IHtFekZpZWxkLCBFekxheW91dCwgRXpGb3JtTGF5b3V0LCBPcGVuLCBNZWRpYX07XG5cbmRlc2NyaWJlKCdFekZpZWxkJywgKCkgPT4ge1xuICB2aXN1YWxTbmFwc2hvdHMoe21hcmtkb3duOiBlekRhdGVJbnB1dFRlc3RzLCBzY29wZX0pO1xuXG4gIGRlc2NyaWJlKCdkYXRlIHBpY2tlcicsICgpID0+IHtcbiAgICBjb25zdCBpbnB1dExhYmVsID0gJ1NlbGVjdCBkZWxpdmVyeSBkYXRlJztcbiAgICBhZnRlckVhY2goamVzdC51c2VSZWFsVGltZXJzKTtcbiAgICBpdCgnc2hvdWxkIHNob3cgY2FsZW5kYXIgb24gY2xpY2snLCAoKSA9PiB7XG4gICAgICBjb25zdCB7Y29udGFpbmVyfSA9IHJlbmRlcig8RXpGaWVsZCB0eXBlPVwiZGF0ZVwiIHZhbHVlPVwiMDEvMDEvMjAxOVwiIGxhYmVsPXtpbnB1dExhYmVsfSAvPik7XG5cbiAgICAgIGZpcmVFdmVudC5tb3VzZURvd24oZ2V0QnlMYWJlbFRleHQoY29udGFpbmVyLCBpbnB1dExhYmVsKSk7XG5cbiAgICAgIGV4cGVjdChjb250YWluZXIpLnRvSGF2ZVRleHRDb250ZW50KCdKYW51YXJ5IDIwMTknKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHNob3cgY2FsZW5kYXIgb24gY3VycmVudCBkYXRlIGlmIHZhbHVlIGlzIGVtcHR5JywgKCkgPT4ge1xuICAgICAgY29uc3Qge2NvbnRhaW5lcn0gPSByZW5kZXIoPEV6RmllbGQgdHlwZT1cImRhdGVcIiB2YWx1ZT1cIlwiIGxhYmVsPXtpbnB1dExhYmVsfSAvPik7XG5cbiAgICAgIGZpcmVFdmVudC5tb3VzZURvd24oZ2V0QnlMYWJlbFRleHQoY29udGFpbmVyLCBpbnB1dExhYmVsKSk7XG5cbiAgICAgIGV4cGVjdChjb250YWluZXIpLnRvSGF2ZVRleHRDb250ZW50KGRheWpzKCkuZm9ybWF0KCdNTU1NIFlZWVknKSk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBkZWNyZW1lbnQgbW9udGggb24gY2FsZW5kYXInLCAoKSA9PiB7XG4gICAgICBjb25zdCB7Y29udGFpbmVyfSA9IHJlbmRlcig8RXpGaWVsZCB0eXBlPVwiZGF0ZVwiIHZhbHVlPVwiMDEvMDEvMjAxOVwiIGxhYmVsPXtpbnB1dExhYmVsfSAvPik7XG5cbiAgICAgIGZpcmVFdmVudC5tb3VzZURvd24oZ2V0QnlMYWJlbFRleHQoY29udGFpbmVyLCBpbnB1dExhYmVsKSk7XG5cbiAgICAgIGZpcmVFdmVudC5jbGljayhnZXRCeVRleHQoY29udGFpbmVyLCAvUHJldi8pKTtcblxuICAgICAgZXhwZWN0KGNvbnRhaW5lcikudG9IYXZlVGV4dENvbnRlbnQoJ0RlY2VtYmVyIDIwMTgnKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIGluY3JlbWVudCBtb250aCBvbiBjYWxlbmRhcicsICgpID0+IHtcbiAgICAgIGNvbnN0IHtjb250YWluZXJ9ID0gcmVuZGVyKDxFekZpZWxkIHR5cGU9XCJkYXRlXCIgdmFsdWU9XCIwMS8wMS8yMDE5XCIgbGFiZWw9e2lucHV0TGFiZWx9IC8+KTtcblxuICAgICAgZmlyZUV2ZW50Lm1vdXNlRG93bihnZXRCeUxhYmVsVGV4dChjb250YWluZXIsIGlucHV0TGFiZWwpKTtcblxuICAgICAgZmlyZUV2ZW50LmNsaWNrKGdldEJ5VGV4dChjb250YWluZXIsIC9OZXh0LykpO1xuXG4gICAgICBleHBlY3QoY29udGFpbmVyKS50b0hhdmVUZXh0Q29udGVudCgnRmVicnVhcnkgMjAxOScpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgY2hhbmdlIGRhdGVzIGJ5IHByZXNzaW5nIHRoZSBsZWZ0IGFycm93IG9uIGNhbGVuZGFyJywgKCkgPT4ge1xuICAgICAgY29uc3Qge2NvbnRhaW5lcn0gPSByZW5kZXIoPEV6RmllbGQgdHlwZT1cImRhdGVcIiB2YWx1ZT1cIjAxLzAxLzIwMTlcIiBsYWJlbD17aW5wdXRMYWJlbH0gLz4pO1xuXG4gICAgICBmaXJlRXZlbnQubW91c2VEb3duKGdldEJ5TGFiZWxUZXh0KGNvbnRhaW5lciwgaW5wdXRMYWJlbCkpO1xuXG4gICAgICBmaXJlRXZlbnQua2V5RG93bihnZXRCeVRleHQoY29udGFpbmVyLCAnMScpLCB7a2V5OiAnQXJyb3dMZWZ0J30pO1xuXG4gICAgICBleHBlY3QoY29udGFpbmVyKS50b0hhdmVUZXh0Q29udGVudCgnRGVjZW1iZXIgMjAxOCcpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgY2hhbmdlIGRhdGVzIGJ5IHByZXNzaW5nIHRoZSByaWdodCBhcnJvdyBvbiBjYWxlbmRhcicsICgpID0+IHtcbiAgICAgIGNvbnN0IHtjb250YWluZXJ9ID0gcmVuZGVyKDxFekZpZWxkIHR5cGU9XCJkYXRlXCIgdmFsdWU9XCIwMS8wMS8yMDE5XCIgbGFiZWw9e2lucHV0TGFiZWx9IC8+KTtcblxuICAgICAgZmlyZUV2ZW50Lm1vdXNlRG93bihnZXRCeUxhYmVsVGV4dChjb250YWluZXIsIGlucHV0TGFiZWwpKTtcblxuICAgICAgZmlyZUV2ZW50LmtleURvd24oZ2V0QnlUZXh0KGNvbnRhaW5lciwgJzEnKSwge2tleTogJ0Fycm93UmlnaHQnfSk7XG5cbiAgICAgIGV4cGVjdChnZXRCeVRleHQoY29udGFpbmVyLCAnMicpLmdldEF0dHJpYnV0ZSgndGFiaW5kZXgnKSkudG9CZSgnMCcpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgY2hhbmdlIGRhdGVzIGJ5IHByZXNzaW5nIHRoZSBkb3duIGFycm93IG9uIGNhbGVuZGFyJywgKCkgPT4ge1xuICAgICAgY29uc3Qge2NvbnRhaW5lcn0gPSByZW5kZXIoPEV6RmllbGQgdHlwZT1cImRhdGVcIiB2YWx1ZT1cIjAxLzAxLzIwMTlcIiBsYWJlbD17aW5wdXRMYWJlbH0gLz4pO1xuXG4gICAgICBmaXJlRXZlbnQubW91c2VEb3duKGdldEJ5TGFiZWxUZXh0KGNvbnRhaW5lciwgaW5wdXRMYWJlbCkpO1xuXG4gICAgICBmaXJlRXZlbnQua2V5RG93bihnZXRCeVRleHQoY29udGFpbmVyLCAnMScpLCB7a2V5OiAnQXJyb3dEb3duJ30pO1xuXG4gICAgICBleHBlY3QoZ2V0QnlUZXh0KGNvbnRhaW5lciwgJzgnKS5nZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JykpLnRvQmUoJzAnKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIGNoYW5nZSBkYXRlcyBieSBwcmVzc2luZyB0aGUgdXAgYXJyb3cgb24gY2FsZW5kYXInLCAoKSA9PiB7XG4gICAgICBjb25zdCB7Y29udGFpbmVyfSA9IHJlbmRlcig8RXpGaWVsZCB0eXBlPVwiZGF0ZVwiIHZhbHVlPVwiMDEvMDEvMjAxOVwiIGxhYmVsPXtpbnB1dExhYmVsfSAvPik7XG5cbiAgICAgIGZpcmVFdmVudC5tb3VzZURvd24oZ2V0QnlMYWJlbFRleHQoY29udGFpbmVyLCBpbnB1dExhYmVsKSk7XG5cbiAgICAgIGZpcmVFdmVudC5rZXlEb3duKGdldEJ5VGV4dChjb250YWluZXIsICcxJyksIHtrZXk6ICdBcnJvd1VwJ30pO1xuXG4gICAgICBleHBlY3QoZ2V0QnlUZXh0KGNvbnRhaW5lciwgJzI1JykuZ2V0QXR0cmlidXRlKCd0YWJpbmRleCcpKS50b0JlKCcwJyk7XG4gICAgICBleHBlY3QoY29udGFpbmVyKS50b0hhdmVUZXh0Q29udGVudCgnRGVjZW1iZXIgMjAxOCcpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgc2VsZWN0IGNoYW5nZSBkYXRlcyBieSBwcmVzc2luZyB0aGUgZW50ZXIga2V5IG9uIGNhbGVuZGFyJywgYXN5bmMgKCkgPT4ge1xuICAgICAgamVzdC51c2VGYWtlVGltZXJzKCk7XG4gICAgICBjb25zdCB7Y29udGFpbmVyfSA9IHJlbmRlcig8RXpGaWVsZCB0eXBlPVwiZGF0ZVwiIHZhbHVlPVwiMDEvMDEvMjAxOVwiIGxhYmVsPXtpbnB1dExhYmVsfSAvPik7XG5cbiAgICAgIGZpcmVFdmVudC5tb3VzZURvd24oZ2V0QnlMYWJlbFRleHQoY29udGFpbmVyLCBpbnB1dExhYmVsKSk7XG5cbiAgICAgIGZpcmVFdmVudC5rZXlEb3duKGdldEJ5VGV4dChjb250YWluZXIsICcxJyksIHtrZXk6ICdBcnJvd1JpZ2h0J30pOyAvLyBEYXlcbiAgICAgIGZpcmVFdmVudC5rZXlEb3duKGdldEJ5VGV4dChjb250YWluZXIsICcyJyksIHtrZXk6ICdBcnJvd1JpZ2h0J30pOyAvLyBEYXlcbiAgICAgIGZpcmVFdmVudC5rZXlEb3duKGdldEJ5VGV4dChjb250YWluZXIsICczJyksIHtrZXk6ICdBcnJvd1JpZ2h0J30pOyAvLyBEYXlcbiAgICAgIGZpcmVFdmVudC5rZXlEb3duKGdldEJ5VGV4dChjb250YWluZXIsICc0JyksIHtrZXk6ICdBcnJvd1JpZ2h0J30pOyAvLyBEYXlcbiAgICAgIGZpcmVFdmVudC5rZXlEb3duKGdldEJ5VGV4dChjb250YWluZXIsICc1JyksIHtrZXk6ICdFbnRlcid9KTtcblxuICAgICAgYWN0KGplc3QucnVuQWxsVGltZXJzKTtcbiAgICAgIGZpcmVFdmVudC5tb3VzZURvd24oZ2V0QnlMYWJlbFRleHQoY29udGFpbmVyLCBpbnB1dExhYmVsKSk7XG4gICAgICBleHBlY3QoZ2V0QnlUZXh0KGNvbnRhaW5lciwgJzUnKS5nZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JykpLnRvQmUoJzAnKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHNlbGVjdCBjaGFuZ2UgZGF0ZXMgYnkgcHJlc3NpbmcgdGhlIHNwYWNlIGtleSBvbiBjYWxlbmRhcicsIGFzeW5jICgpID0+IHtcbiAgICAgIGplc3QudXNlRmFrZVRpbWVycygpO1xuICAgICAgY29uc3Qge2NvbnRhaW5lcn0gPSByZW5kZXIoPEV6RmllbGQgdHlwZT1cImRhdGVcIiB2YWx1ZT1cIjAxLzAxLzIwMTlcIiBsYWJlbD17aW5wdXRMYWJlbH0gLz4pO1xuXG4gICAgICBmaXJlRXZlbnQubW91c2VEb3duKGdldEJ5TGFiZWxUZXh0KGNvbnRhaW5lciwgaW5wdXRMYWJlbCkpO1xuXG4gICAgICBmaXJlRXZlbnQua2V5RG93bihnZXRCeVRleHQoY29udGFpbmVyLCAnMScpLCB7a2V5OiAnQXJyb3dSaWdodCd9KTsgLy8gRGF5XG4gICAgICBmaXJlRXZlbnQua2V5RG93bihnZXRCeVRleHQoY29udGFpbmVyLCAnMicpLCB7a2V5OiAnQXJyb3dSaWdodCd9KTsgLy8gRGF5XG4gICAgICBmaXJlRXZlbnQua2V5RG93bihnZXRCeVRleHQoY29udGFpbmVyLCAnMycpLCB7a2V5OiAnQXJyb3dSaWdodCd9KTsgLy8gRGF5XG4gICAgICBmaXJlRXZlbnQua2V5RG93bihnZXRCeVRleHQoY29udGFpbmVyLCAnNCcpLCB7a2V5OiAnQXJyb3dSaWdodCd9KTsgLy8gRGF5XG4gICAgICBmaXJlRXZlbnQua2V5RG93bihnZXRCeVRleHQoY29udGFpbmVyLCAnNScpLCB7a2V5OiAnU3BhY2UnfSk7XG5cbiAgICAgIGFjdChqZXN0LnJ1bkFsbFRpbWVycyk7XG4gICAgICBmaXJlRXZlbnQubW91c2VEb3duKGdldEJ5TGFiZWxUZXh0KGNvbnRhaW5lciwgaW5wdXRMYWJlbCkpO1xuICAgICAgZXhwZWN0KGdldEJ5VGV4dChjb250YWluZXIsICc1JykuZ2V0QXR0cmlidXRlKCd0YWJpbmRleCcpKS50b0JlKCcwJyk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBmaXJlIG9uY2hhbmdlIHdoZW4gZGF5IGlzIHR5cGVkJywgKCkgPT4ge1xuICAgICAgY29uc3QgaGFuZGxlQ2hhbmdlID0gamVzdC5mbigpO1xuICAgICAgY29uc3Qge2NvbnRhaW5lcn0gPSByZW5kZXIoXG4gICAgICAgIDxFekZpZWxkIHR5cGU9XCJkYXRlXCIgdmFsdWU9XCIwMS8wMS8yMDE5XCIgbGFiZWw9e2lucHV0TGFiZWx9IG9uQ2hhbmdlPXtoYW5kbGVDaGFuZ2V9IC8+XG4gICAgICApO1xuXG4gICAgICBmaXJlRXZlbnQubW91c2VEb3duKGdldEJ5TGFiZWxUZXh0KGNvbnRhaW5lciwgaW5wdXRMYWJlbCkpO1xuXG4gICAgICBjb25zdCBpbnB1dCA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpO1xuXG4gICAgICBhY3QoKCkgPT4ge1xuICAgICAgICBmaXJlRXZlbnQuY2hhbmdlKGlucHV0LCB7dGFyZ2V0OiB7dmFsdWU6ICcwMi8wMS8yMDE5J319KTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QoaGFuZGxlQ2hhbmdlKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBmaXJlIG9uY2hhbmdlIHdoZW4gZGF5IGlzIGNsaWNrZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBoYW5kbGVDaGFuZ2UgPSBqZXN0LmZuKCk7XG4gICAgICBjb25zdCB7Y29udGFpbmVyfSA9IHJlbmRlcihcbiAgICAgICAgPEV6RmllbGQgdHlwZT1cImRhdGVcIiB2YWx1ZT1cIjAxLzAxLzIwMTlcIiBsYWJlbD17aW5wdXRMYWJlbH0gb25DaGFuZ2U9e2hhbmRsZUNoYW5nZX0gLz5cbiAgICAgICk7XG5cbiAgICAgIGZpcmVFdmVudC5tb3VzZURvd24oZ2V0QnlMYWJlbFRleHQoY29udGFpbmVyLCBpbnB1dExhYmVsKSk7XG5cbiAgICAgIGFjdCgoKSA9PiB7XG4gICAgICAgIGZpcmVFdmVudC5jbGljayhnZXRCeVRleHQoY29udGFpbmVyLCAnNScpKTtcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QoaGFuZGxlQ2hhbmdlKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBoaWRlIGNhbGVuZGFyIHdoZW4gZGF5IGlzIGNsaWNrZWQnLCAoKSA9PiB7XG4gICAgICBqZXN0LnVzZUZha2VUaW1lcnMoKTtcblxuICAgICAgY29uc3Qge2NvbnRhaW5lcn0gPSByZW5kZXIoPEV6RmllbGQgdHlwZT1cImRhdGVcIiB2YWx1ZT1cIjAxLzAxLzIwMTlcIiBsYWJlbD17aW5wdXRMYWJlbH0gLz4pO1xuXG4gICAgICBmaXJlRXZlbnQubW91c2VEb3duKGdldEJ5TGFiZWxUZXh0KGNvbnRhaW5lciwgaW5wdXRMYWJlbCkpO1xuXG4gICAgICBleHBlY3QoY29udGFpbmVyKS50b0hhdmVUZXh0Q29udGVudCgnSmFudWFyeSAyMDE5Jyk7XG5cbiAgICAgIGFjdCgoKSA9PiB7XG4gICAgICAgIGZpcmVFdmVudC5jbGljayhnZXRCeVRleHQoY29udGFpbmVyLCAnMScpKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDYWxlbmRhciBpcyBzdGlsbCB2aXNpYmxlIGZvciAxMDAgbWlsbGlzZWNvbmRzIHRvIG1ha2UgY2xpY2tpbmcgZmVlbCBtb3JlIHNvbGlkXG4gICAgICBleHBlY3QoY29udGFpbmVyKS50b0hhdmVUZXh0Q29udGVudCgnSmFudWFyeSAyMDE5Jyk7XG5cbiAgICAgIC8vIEZhc3QtZm9yd2FyZCB1bnRpbCBhbGwgdGltZXJzIGhhdmUgYmVlbiBleGVjdXRlZFxuICAgICAgYWN0KGplc3QucnVuQWxsVGltZXJzKTtcblxuICAgICAgZXhwZWN0KGNvbnRhaW5lcikubm90LnRvSGF2ZVRleHRDb250ZW50KCdKYW51YXJ5IDIwMTknKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIGlnbm9yZSBjbGlja3MgYW5kIGVudGVyIGtleSBvbiBkaXNhYmxlZCBkYXRlcycsICgpID0+IHtcbiAgICAgIGplc3QudXNlRmFrZVRpbWVycygpO1xuXG4gICAgICBjb25zdCB7Y29udGFpbmVyfSA9IHJlbmRlcihcbiAgICAgICAgPEV6RmllbGRcbiAgICAgICAgICB0eXBlPVwiZGF0ZVwiXG4gICAgICAgICAgdmFsdWU9XCIwMS8yMC8yMDIwXCJcbiAgICAgICAgICBtaW5EYXRlPXsnMDEvMjAvMjAyMCd9XG4gICAgICAgICAgbWF4RGF0ZT17JzAxLzI0LzIwMjAnfVxuICAgICAgICAgIGxhYmVsPXtpbnB1dExhYmVsfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgLy8gb3BlbiB0aGUgY2FsZW5kYXIgcGlja2VyXG4gICAgICBmaXJlRXZlbnQubW91c2VEb3duKGdldEJ5TGFiZWxUZXh0KGNvbnRhaW5lciwgaW5wdXRMYWJlbCkpO1xuXG4gICAgICBleHBlY3QoY29udGFpbmVyKS50b0hhdmVUZXh0Q29udGVudCgnSmFudWFyeSAyMDIwJyk7XG5cbiAgICAgIC8vIGNsaWNrIG9uIGEgZGF0ZSB0aGF0IGlzIGJlZm9yZSB0aGUgbWluRGF0ZVxuICAgICAgYWN0KCgpID0+IHtcbiAgICAgICAgZmlyZUV2ZW50LmNsaWNrKGdldEJ5VGV4dChjb250YWluZXIsICcxNScpKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBGYXN0LWZvcndhcmQgdW50aWwgYWxsIHRpbWVycyBoYXZlIGJlZW4gZXhlY3V0ZWRcbiAgICAgIGFjdChqZXN0LnJ1bkFsbFRpbWVycyk7XG5cbiAgICAgIC8vIGFzc2VydCBjYWxlbmRhciBpcyBzdGlsbCBvcGVuXG4gICAgICBleHBlY3QoY29udGFpbmVyKS50b0hhdmVUZXh0Q29udGVudCgnSmFudWFyeSAyMDIwJyk7XG5cbiAgICAgIC8vIG5vdyB0cnkgc2VsZWN0aW5nIHRoZSBkaXNhYmxlZCBkYXRlIHdpdGggdGhlIGtleWJvYXJkXG4gICAgICBhY3QoKCkgPT4ge1xuICAgICAgICBmaXJlRXZlbnQua2V5RG93bihnZXRCeVRleHQoY29udGFpbmVyLCAnMjAnKSwge2tleTogJ0Fycm93TGVmdCd9KTtcbiAgICAgICAgZmlyZUV2ZW50LmtleURvd24oZ2V0QnlUZXh0KGNvbnRhaW5lciwgJzE5JyksIHtrZXk6ICdFbnRlcid9KTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBGYXN0LWZvcndhcmQgdW50aWwgYWxsIHRpbWVycyBoYXZlIGJlZW4gZXhlY3V0ZWRcbiAgICAgIGFjdChqZXN0LnJ1bkFsbFRpbWVycyk7XG5cbiAgICAgIC8vIGFzc2VydCBjYWxlbmRhciBpcyBzdGlsbCBvcGVuXG4gICAgICBleHBlY3QoY29udGFpbmVyKS50b0hhdmVUZXh0Q29udGVudCgnSmFudWFyeSAyMDIwJyk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBoaWRlIGNhbGVuZGFyIG9uIGVzY2FwZScsICgpID0+IHtcbiAgICAgIGNvbnN0IHtjb250YWluZXJ9ID0gcmVuZGVyKDxFekZpZWxkIHR5cGU9XCJkYXRlXCIgdmFsdWU9XCIwMS8wMS8yMDE5XCIgbGFiZWw9e2lucHV0TGFiZWx9IC8+KTtcblxuICAgICAgZmlyZUV2ZW50Lm1vdXNlRG93bihnZXRCeUxhYmVsVGV4dChjb250YWluZXIsIGlucHV0TGFiZWwpKTtcblxuICAgICAgZXhwZWN0KGNvbnRhaW5lcikudG9IYXZlVGV4dENvbnRlbnQoJ0phbnVhcnkgMjAxOScpO1xuXG4gICAgICBmaXJlRXZlbnQua2V5RG93bihnZXRCeUxhYmVsVGV4dChjb250YWluZXIsIGlucHV0TGFiZWwpLCB7a2V5OiAnRXNjYXBlJ30pO1xuXG4gICAgICBleHBlY3QoY29udGFpbmVyKS5ub3QudG9IYXZlVGV4dENvbnRlbnQoJ0phbnVhcnkgMjAxOScpO1xuXG4gICAgICBmaXJlRXZlbnQubW91c2VEb3duKGdldEJ5TGFiZWxUZXh0KGNvbnRhaW5lciwgaW5wdXRMYWJlbCkpO1xuXG4gICAgICBleHBlY3QoY29udGFpbmVyKS50b0hhdmVUZXh0Q29udGVudCgnSmFudWFyeSAyMDE5Jyk7XG5cbiAgICAgIC8vIHByZXNzIGVzY2FwZSB3aGVuIGZvY3VzZWQgb24gYSBkYXlcbiAgICAgIGZpcmVFdmVudC5rZXlEb3duKGdldEJ5VGV4dChjb250YWluZXIsICczJyksIHtrZXk6ICdFc2NhcGUnfSk7XG5cbiAgICAgIGV4cGVjdChjb250YWluZXIpLm5vdC50b0hhdmVUZXh0Q29udGVudCgnSmFudWFyeSAyMDE5Jyk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBoaWRlIGNhbGVuZGFyIG9uIGNsaWNrIG91dHNpZGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB7Y29udGFpbmVyfSA9IHJlbmRlcihcbiAgICAgICAgPD5cbiAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIj5PdXRzaWRlIEJ1dHRvbjwvYnV0dG9uPlxuICAgICAgICAgIDxFekZpZWxkIHR5cGU9XCJkYXRlXCIgdmFsdWU9XCIwMS8wMS8yMDE5XCIgbGFiZWw9e2lucHV0TGFiZWx9IC8+XG4gICAgICAgIDwvPlxuICAgICAgKTtcblxuICAgICAgZmlyZUV2ZW50Lm1vdXNlRG93bihnZXRCeUxhYmVsVGV4dChjb250YWluZXIsIGlucHV0TGFiZWwpKTtcblxuICAgICAgZXhwZWN0KGNvbnRhaW5lcikudG9IYXZlVGV4dENvbnRlbnQoJ0phbnVhcnkgMjAxOScpO1xuXG4gICAgICBmaXJlRXZlbnQubW91c2VEb3duKGdldEJ5VGV4dChjb250YWluZXIsIC9PdXRzaWRlIEJ1dHRvbi8pKTtcblxuICAgICAgZXhwZWN0KGNvbnRhaW5lcikubm90LnRvSGF2ZVRleHRDb250ZW50KCdKYW51YXJ5IDIwMTknKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdfQ==