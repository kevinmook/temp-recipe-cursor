"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _react = _interopRequireDefault(require("react"));

var _jestAxe = require("jest-axe");

var _sosia = require("sosia");

var _react2 = require("@testing-library/react");

var _EzTableTest = _interopRequireDefault(require("./EzTable.test.md"));

var _EzTable = _interopRequireDefault(require("../EzTable.md"));

var _EzTable2 = _interopRequireDefault(require("../EzTable"));

var _index = require("../../index");

var _jestGlobals = require("../../../jest-globals");

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2["default"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

var mockOverflow = false;
jest.mock('../useOverflowDetection', function () {
  return function () {
    return [mockOverflow, function () {}];
  };
});

var SetOverflow = function SetOverflow(_ref) {
  var children = _ref.children;
  // jsdom doesn't simulate layout, so we can't detect overflow in tests
  mockOverflow = true;
  return children;
};

var scope = {
  EzButton: _index.EzButton,
  EzTable: _EzTable2["default"],
  EzPage: _index.EzPage,
  EzCard: _index.EzCard,
  EzHeading: _index.EzHeading,
  EzAlert: _index.EzAlert,
  EzTextStyle: _index.EzTextStyle
};
describe('EzTable', function () {
  (0, _sosia.visualSnapshots)({
    markdown: _EzTable["default"],
    scope: scope
  });
  (0, _sosia.visualSnapshots)({
    markdown: _EzTableTest["default"],
    scope: _objectSpread({}, scope, {
      SetOverflow: SetOverflow
    })
  });
  afterEach(_react2.cleanup);
  beforeEach(function () {
    mockOverflow = false;
  });
  var columns = [{
    heading: 'Store name',
    component: function component(_ref2) {
      var item = _ref2.item;
      return item.store;
    },
    key: 'store'
  }, {
    heading: 'Total sales',
    numeric: true,
    key: 'total'
  }, {
    heading: 'Average order value',
    numeric: true,
    key: 'average'
  }];
  var items = [{
    id: '#004',
    store: '123 Example Store',
    total: 23267,
    average: 327.79
  }, {
    id: '#007',
    store: '45 Meadowview Lane',
    total: 22788,
    average: 367.55
  }];
  describe('column sorting', function () {
    describe('when the user requests a column to be sorted', function () {
      var onSortClick = jest.fn();
      var sortableColumns = [{
        heading: 'Store name',
        key: 'store',
        sortable: true
      }, {
        heading: 'Total sales',
        key: 'total',
        sortable: true
      }];
      var props = {
        columns: sortableColumns,
        items: items,
        onSortClick: onSortClick
      };
      var mockEvent = expect.any(Object);
      beforeEach(function () {
        onSortClick.mockClear();
      });
      it('notifies the client that sort is requested', function () {
        var _fullRender = (0, _jestGlobals.fullRender)(_react["default"].createElement(_EzTable2["default"], props)),
            getByText = _fullRender.getByText;

        _react2.fireEvent.click(getByText(sortableColumns[0].heading));

        expect(onSortClick).toHaveBeenCalledTimes(1);
        expect(onSortClick).toHaveBeenCalledWith(mockEvent, expect.objectContaining({
          column: expect.objectContaining(sortableColumns[0]),
          direction: 'asc'
        }));
      });
      it('does NOT notify the client of a sort when a column is not sortable', function () {
        var _fullRender2 = (0, _jestGlobals.fullRender)(_react["default"].createElement(_EzTable2["default"], (0, _extends2["default"])({}, props, {
          columns: [{
            heading: 'Store name',
            accessor: 'name',
            sortable: false
          }, {
            heading: 'Total sales',
            accessor: 'total',
            sortable: true
          }]
        }))),
            getByText = _fullRender2.getByText;

        _react2.fireEvent.click(getByText(sortableColumns[0].heading));

        expect(onSortClick).not.toHaveBeenCalled();
      });
      it('can sort a single column in both ascending and descending order', function () {
        var _fullRender3 = (0, _jestGlobals.fullRender)(_react["default"].createElement(_EzTable2["default"], props)),
            getByText = _fullRender3.getByText;

        _react2.fireEvent.click(getByText(sortableColumns[1].heading));

        expect(onSortClick).toHaveBeenCalledWith(mockEvent, expect.objectContaining({
          column: expect.objectContaining(sortableColumns[1]),
          direction: 'asc'
        }));

        _react2.fireEvent.click(getByText(sortableColumns[1].heading));

        expect(onSortClick).toHaveBeenCalledWith(mockEvent, expect.objectContaining({
          column: expect.objectContaining(sortableColumns[1]),
          direction: 'desc'
        }));
      });
      it('should not change the sort order if the provided onSortClick callback prevents default', function () {
        var _fullRender4 = (0, _jestGlobals.fullRender)(_react["default"].createElement(_EzTable2["default"], props)),
            getByText = _fullRender4.getByText;

        onSortClick.mockImplementation(function (event) {
          return event.preventDefault();
        });

        _react2.fireEvent.click(getByText(sortableColumns[1].heading));

        expect(onSortClick).toHaveBeenCalledWith(mockEvent, expect.objectContaining({
          column: expect.objectContaining(sortableColumns[1]),
          direction: 'asc'
        }));

        _react2.fireEvent.click(getByText(sortableColumns[1].heading));

        expect(onSortClick).toHaveBeenCalledWith(mockEvent, expect.objectContaining({
          column: expect.objectContaining(sortableColumns[1]),
          direction: 'asc'
        }));
      });
    });
  });
  describe('bulk-select', function () {
    function render(props) {
      var _fullRender5 = (0, _jestGlobals.fullRender)(_react["default"].createElement(_EzTable2["default"], props)),
          queryByLabelText = _fullRender5.queryByLabelText,
          queryAllByLabelText = _fullRender5.queryAllByLabelText;

      return {
        bulkSelectInput: queryByLabelText('Select all'),
        rowSelectInputs: queryAllByLabelText('Select row')
      };
    }

    describe('when a bulk-select is requested', function () {
      var onRowSelectClick = jest.fn();
      var onBulkSelectClick = jest.fn();
      var isRowSelected = jest.fn();
      var selection = {
        onBulkSelectClick: onBulkSelectClick,
        onRowSelectClick: onRowSelectClick,
        isRowSelected: isRowSelected
      };
      var props = {
        columns: columns,
        items: items,
        selection: selection
      };
      beforeEach(function () {
        onRowSelectClick.mockClear();
        onBulkSelectClick.mockClear();
        isRowSelected.mockImplementation(function () {
          return false;
        });
      });
      it('renders a bulk-select input in a column header', function () {
        var _render = render(props),
            bulkSelectInput = _render.bulkSelectInput;

        expect(bulkSelectInput).not.toBeNull();
      });
      it('renders a row-select input for each row', function () {
        var _render2 = render(props),
            rowSelectInputs = _render2.rowSelectInputs;

        expect(rowSelectInputs).toHaveLength(items.length);
      });
      describe('the bulk-select input', function () {
        it('calls the provided click handler when the input state changes', function () {
          var _render3 = render(props),
              bulkSelectInput = _render3.bulkSelectInput;

          bulkSelectInput.click();
          expect(onBulkSelectClick).toHaveBeenCalledTimes(1);
          expect(onBulkSelectClick).toHaveBeenCalledWith(expect.any(Object));
        });
        describe('checked state', function () {
          var expectedState;
          afterEach(function () {
            var _render4 = render(props),
                bulkSelectInput = _render4.bulkSelectInput;

            expect(bulkSelectInput.checked).toBe(expectedState);
          });
          it('is checked when every row has been selected', function () {
            isRowSelected.mockImplementation(function () {
              return true;
            });
            expectedState = true;
          });
          it('is not checked when only some rows are selected', function () {
            isRowSelected.mockImplementation(function (item) {
              return item.id === items[0].id;
            });
            expectedState = false;
          });
          it('is not checked when no rows are selected', function () {
            isRowSelected.mockImplementation(function () {
              return false;
            });
            expectedState = false;
          });
        });
      });
      describe('the row-select input', function () {
        it('calls the provided click handler when clicked', function () {
          var _render5 = render(props),
              rowSelectInputs = _render5.rowSelectInputs;

          _react2.fireEvent.click(rowSelectInputs[0]);

          expect(onRowSelectClick).toHaveBeenCalledTimes(1);
          expect(onRowSelectClick).toHaveBeenCalledWith(expect.any(Object), {
            item: items[0]
          });
        });
        it('determines its checked state based on the provided function', function () {
          isRowSelected.mockImplementation(function (item) {
            return item.id === items[0].id;
          });

          var _render6 = render(props),
              rowSelectInputs = _render6.rowSelectInputs;

          expect(rowSelectInputs[0].checked).toBe(true);
          expect(rowSelectInputs[1].checked).toBe(false);
        });
      });
    });
    describe('when a bulk-select functionality is not requested', function () {
      it('does not render a bulk-select input in a column header', function () {
        var _render7 = render({
          columns: columns,
          items: items
        }),
            bulkSelectInput = _render7.bulkSelectInput;

        expect(bulkSelectInput).toBeNull();
      });
      it('does not render a row-select input for each row', function () {
        var _render8 = render({
          columns: columns,
          items: items
        }),
            rowSelectInputs = _render8.rowSelectInputs;

        expect(rowSelectInputs[0]).toBeUndefined();
      });
    });
    it('should meet accessibility guidelines',
    /*#__PURE__*/
    (0, _asyncToGenerator2["default"])(
    /*#__PURE__*/
    _regenerator["default"].mark(function _callee() {
      var wrapper, actual;
      return _regenerator["default"].wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              wrapper = (0, _jestGlobals.renderToHtml)(_react["default"].createElement(_EzTable2["default"], {
                columns: columns,
                items: items,
                selection: {
                  onBulkSelectClick: function onBulkSelectClick() {
                    return null;
                  },
                  onRowSelectClick: function onRowSelectClick() {
                    return null;
                  },
                  isRowSelected: function isRowSelected() {
                    return false;
                  }
                }
              }));
              _context.next = 3;
              return (0, _jestAxe.axe)(wrapper);

            case 3:
              actual = _context.sent;
              expect(actual).toHaveNoViolations();

            case 5:
            case "end":
              return _context.stop();
          }
        }
      }, _callee);
    })));
  });
  describe('table select banner', function () {
    var data = [{
      first: 'Tiffany',
      last: 'Morin'
    }, {
      first: 'Mitchell',
      last: 'Hoffman'
    }, {
      first: 'Léo',
      last: 'Gonzalez'
    }, {
      first: 'Alberto',
      last: 'Arias'
    }, {
      first: 'Olivier',
      last: 'Campos'
    }, {
      first: 'Ömür',
      last: 'Ekici'
    }, {
      first: 'Énio',
      last: 'Barros'
    }, {
      first: 'Ava',
      last: 'Ma'
    }, {
      first: 'Norberta',
      last: 'Novaes'
    }, {
      first: 'Deni',
      last: 'Lubbers'
    }];
    it('shows option to select all rows when a page is selected', function () {
      var onSelectAllClick = jest.fn();

      var _fullRender6 = (0, _jestGlobals.fullRender)(_react["default"].createElement(_EzTable2["default"], {
        title: "All Stores",
        subtitle: "Compared to the same period last year",
        selection: {
          onRowSelectClick: function onRowSelectClick() {},
          onBulkSelectClick: function onBulkSelectClick() {},
          isRowSelected: function isRowSelected() {
            return true;
          },
          onSelectAllClick: onSelectAllClick,
          onSelectNoneClick: function onSelectNoneClick() {}
        },
        columns: [{
          heading: 'First Name',
          key: 'first'
        }, {
          heading: 'Last Name',
          key: 'last'
        }],
        items: data.slice(0, 5),
        pagination: {
          currentPage: 1,
          totalRows: 10,
          rowsPerPage: 5,
          rowsPerPageOptions: [5, 10, 20, 30],
          onPrevPageClick: function onPrevPageClick() {},
          onNextPageClick: function onNextPageClick() {},
          onRowsPerPageChange: function onRowsPerPageChange() {}
        }
      })),
          getByText = _fullRender6.getByText;

      var selectAllButton = getByText('Select all 10 rows');

      _react2.fireEvent.click(selectAllButton);

      expect(onSelectAllClick).toHaveBeenCalled();
    });
  });
  describe('clickable rows', function () {
    var data = [{
      first: 'Tiffany',
      last: 'Morin'
    }, {
      first: 'Mitchell',
      last: 'Hoffman'
    }];

    var link = function link(onclick) {
      return function (_ref4) {
        var _ref4$item = _ref4.item,
            first = _ref4$item.first,
            last = _ref4$item.last,
            linkRef = _ref4.linkRef;
        return _react["default"].createElement("div", null, _react["default"].createElement("div", null, _react["default"].createElement("a", {
          href: "/",
          ref: linkRef,
          onClick: onclick
        }, first, " ", last)));
      };
    };

    it('calls the onClick of the link target when clicking inside a table row', function () {
      var spy = jest.fn();

      var _fullRender7 = (0, _jestGlobals.fullRender)(_react["default"].createElement(_EzTable2["default"], {
        title: "All Stores",
        subtitle: "Compared to the same period last year",
        columns: [{
          heading: 'Link',
          component: link(spy),
          key: 'link'
        }, {
          heading: 'First Name',
          key: 'first'
        }, {
          heading: 'Last Name',
          key: 'last'
        }],
        items: data
      })),
          getByText = _fullRender7.getByText;

      var cell = getByText('Tiffany');

      _react2.fireEvent.mouseOver(cell);

      _react2.fireEvent.click(cell);

      expect(spy).toHaveBeenCalled();
    });
    it('does NOT call the onClick of the link target if clicking interactive elements in the row', function () {
      var spy = jest.fn();

      var _fullRender8 = (0, _jestGlobals.fullRender)(_react["default"].createElement(_EzTable2["default"], {
        title: "All Stores",
        subtitle: "Compared to the same period last year",
        selection: {
          onRowSelectClick: function onRowSelectClick() {},
          onBulkSelectClick: function onBulkSelectClick() {},
          isRowSelected: function isRowSelected() {
            return true;
          }
        },
        columns: [{
          heading: 'Link',
          component: link(spy),
          key: 'link'
        }, {
          heading: 'First Name',
          key: 'first'
        }, {
          heading: 'Last Name',
          key: 'last'
        }],
        items: data
      })),
          queryAllByLabelText = _fullRender8.queryAllByLabelText;

      var checkbox = queryAllByLabelText('Select row')[0];

      _react2.fireEvent.click(checkbox);

      expect(spy).not.toHaveBeenCalled();
    });
  });
  describe('accessor prop compatibility', function () {
    var component;
    var mappableColumns = [{
      heading: 'Name',
      accessor: function accessor(_ref5) {
        var item = _ref5.item;
        return item.store;
      }
    }, {
      heading: 'Sales',
      accessor: 'total',
      numeric: true
    }];
    beforeEach(function () {
      component = (0, _jestGlobals.fullRender)(_react["default"].createElement(_EzTable2["default"], {
        title: "All Stores",
        subtitle: "Compared to the same period last year",
        columns: mappableColumns,
        items: items
      }));
    });
    describe('when the accessor prop is a function', function () {
      it('renders the table properly', function () {
        var _component = component,
            getByText = _component.getByText;
        expect(getByText('Name')).toBeDefined();
      });
    });
    describe('when the accessor prop is a string', function () {
      it('renders the table properly', function () {
        var _component2 = component,
            getByText = _component2.getByText;
        expect(getByText('Sales')).toBeDefined();
      });
    });
  });
  it('should meet accessibility guidelines',
  /*#__PURE__*/
  (0, _asyncToGenerator2["default"])(
  /*#__PURE__*/
  _regenerator["default"].mark(function _callee2() {
    var wrapper, actual;
    return _regenerator["default"].wrap(function _callee2$(_context2) {
      while (1) {
        switch (_context2.prev = _context2.next) {
          case 0:
            wrapper = (0, _jestGlobals.renderToHtml)(_react["default"].createElement(_EzTable2["default"], {
              columns: columns,
              items: items
            }));
            _context2.next = 3;
            return (0, _jestAxe.axe)(wrapper);

          case 3:
            actual = _context2.sent;
            expect(actual).toHaveNoViolations();

          case 5:
          case "end":
            return _context2.stop();
        }
      }
    }, _callee2);
  })));
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL0V6VGFibGUvX190ZXN0c19fL0V6VGFibGUudGVzdC50c3giXSwibmFtZXMiOlsibW9ja092ZXJmbG93IiwiamVzdCIsIm1vY2siLCJTZXRPdmVyZmxvdyIsImNoaWxkcmVuIiwic2NvcGUiLCJFekJ1dHRvbiIsIkV6VGFibGUiLCJFelBhZ2UiLCJFekNhcmQiLCJFekhlYWRpbmciLCJFekFsZXJ0IiwiRXpUZXh0U3R5bGUiLCJkZXNjcmliZSIsIm1hcmtkb3duIiwicmVncmVzc2lvblRlc3RzIiwiYWZ0ZXJFYWNoIiwiY2xlYW51cCIsImJlZm9yZUVhY2giLCJjb2x1bW5zIiwiaGVhZGluZyIsImNvbXBvbmVudCIsIml0ZW0iLCJzdG9yZSIsImtleSIsIm51bWVyaWMiLCJpdGVtcyIsImlkIiwidG90YWwiLCJhdmVyYWdlIiwib25Tb3J0Q2xpY2siLCJmbiIsInNvcnRhYmxlQ29sdW1ucyIsInNvcnRhYmxlIiwicHJvcHMiLCJtb2NrRXZlbnQiLCJleHBlY3QiLCJhbnkiLCJPYmplY3QiLCJtb2NrQ2xlYXIiLCJpdCIsImdldEJ5VGV4dCIsImZpcmVFdmVudCIsImNsaWNrIiwidG9IYXZlQmVlbkNhbGxlZFRpbWVzIiwidG9IYXZlQmVlbkNhbGxlZFdpdGgiLCJvYmplY3RDb250YWluaW5nIiwiY29sdW1uIiwiZGlyZWN0aW9uIiwiYWNjZXNzb3IiLCJub3QiLCJ0b0hhdmVCZWVuQ2FsbGVkIiwibW9ja0ltcGxlbWVudGF0aW9uIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInJlbmRlciIsInF1ZXJ5QnlMYWJlbFRleHQiLCJxdWVyeUFsbEJ5TGFiZWxUZXh0IiwiYnVsa1NlbGVjdElucHV0Iiwicm93U2VsZWN0SW5wdXRzIiwib25Sb3dTZWxlY3RDbGljayIsIm9uQnVsa1NlbGVjdENsaWNrIiwiaXNSb3dTZWxlY3RlZCIsInNlbGVjdGlvbiIsInRvQmVOdWxsIiwidG9IYXZlTGVuZ3RoIiwibGVuZ3RoIiwiZXhwZWN0ZWRTdGF0ZSIsImNoZWNrZWQiLCJ0b0JlIiwidG9CZVVuZGVmaW5lZCIsIndyYXBwZXIiLCJhY3R1YWwiLCJ0b0hhdmVOb1Zpb2xhdGlvbnMiLCJkYXRhIiwiZmlyc3QiLCJsYXN0Iiwib25TZWxlY3RBbGxDbGljayIsIm9uU2VsZWN0Tm9uZUNsaWNrIiwic2xpY2UiLCJjdXJyZW50UGFnZSIsInRvdGFsUm93cyIsInJvd3NQZXJQYWdlIiwicm93c1BlclBhZ2VPcHRpb25zIiwib25QcmV2UGFnZUNsaWNrIiwib25OZXh0UGFnZUNsaWNrIiwib25Sb3dzUGVyUGFnZUNoYW5nZSIsInNlbGVjdEFsbEJ1dHRvbiIsImxpbmsiLCJvbmNsaWNrIiwibGlua1JlZiIsInNweSIsImNlbGwiLCJtb3VzZU92ZXIiLCJjaGVja2JveCIsIm1hcHBhYmxlQ29sdW1ucyIsInRvQmVEZWZpbmVkIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7Ozs7O0FBRUEsSUFBSUEsWUFBWSxHQUFHLEtBQW5CO0FBQ0FDLElBQUksQ0FBQ0MsSUFBTCxDQUFVLHlCQUFWLEVBQXFDO0FBQUEsU0FBTTtBQUFBLFdBQU0sQ0FBQ0YsWUFBRCxFQUFlLFlBQU0sQ0FBRSxDQUF2QixDQUFOO0FBQUEsR0FBTjtBQUFBLENBQXJDOztBQUVBLElBQU1HLFdBQVcsR0FBRyxTQUFkQSxXQUFjLE9BQWdCO0FBQUEsTUFBZEMsUUFBYyxRQUFkQSxRQUFjO0FBQ2xDO0FBQ0FKLEVBQUFBLFlBQVksR0FBRyxJQUFmO0FBQ0EsU0FBT0ksUUFBUDtBQUNELENBSkQ7O0FBTUEsSUFBTUMsS0FBSyxHQUFHO0FBQUNDLEVBQUFBLFFBQVEsRUFBUkEsZUFBRDtBQUFXQyxFQUFBQSxPQUFPLEVBQVBBLG9CQUFYO0FBQW9CQyxFQUFBQSxNQUFNLEVBQU5BLGFBQXBCO0FBQTRCQyxFQUFBQSxNQUFNLEVBQU5BLGFBQTVCO0FBQW9DQyxFQUFBQSxTQUFT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O0FBQUE7QUFBQTtBQUNuQytCLFlBQUFBLE9BRG1DLEdBQ3pCLCtCQUFhLGdDQUFDLG9CQUFEO0FBQVMsY0FBQSxPQUFPLEVBQUVwRCxPQUFsQjtBQUEyQixjQUFBLEtBQUssRUFBRU87QUFBbEMsY0FBYixDQUR5QjtBQUFBO0FBQUEsbUJBRXBCLGtCQUFJNkMsT0FBSixDQUZvQjs7QUFBQTtBQUVuQ0MsWUFBQUEsTUFGbUM7QUFHekNwQyxZQUFBQSxNQUFNLENBQUNvQyxNQUFELENBQU4sQ0FBZUMsa0JBQWY7O0FBSHlDO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEdBQXpDLEdBQUY7QUFLRCxDQTVZTyxDQUFSIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7YXhlfSBmcm9tICdqZXN0LWF4ZSc7XG5pbXBvcnQge3Zpc3VhbFNuYXBzaG90c30gZnJvbSAnc29zaWEnO1xuaW1wb3J0IHtmaXJlRXZlbnQsIGNsZWFudXB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnO1xuaW1wb3J0IHJlZ3Jlc3Npb25UZXN0cyBmcm9tICcuL0V6VGFibGUudGVzdC5tZCc7XG5pbXBvcnQgbWFya2Rvd24gZnJvbSAnLi4vRXpUYWJsZS5tZCc7XG5pbXBvcnQgRXpUYWJsZSBmcm9tICcuLi9FelRhYmxlJztcbmltcG9ydCB7RXpCdXR0b24sIEV6UGFnZSwgRXpDYXJkLCBFekhlYWRpbmcsIEV6QWxlcnQsIEV6VGV4dFN0eWxlfSBmcm9tICcuLi8uLi9pbmRleCc7XG5pbXBvcnQge2Z1bGxSZW5kZXIsIHJlbmRlclRvSHRtbH0gZnJvbSAnLi4vLi4vLi4vamVzdC1nbG9iYWxzJztcblxubGV0IG1vY2tPdmVyZmxvdyA9IGZhbHNlO1xuamVzdC5tb2NrKCcuLi91c2VPdmVyZmxvd0RldGVjdGlvbicsICgpID0+ICgpID0+IFttb2NrT3ZlcmZsb3csICgpID0+IHt9XSk7XG5cbmNvbnN0IFNldE92ZXJmbG93ID0gKHtjaGlsZHJlbn0pID0+IHtcbiAgLy8ganNkb20gZG9lc24ndCBzaW11bGF0ZSBsYXlvdXQsIHNvIHdlIGNhbid0IGRldGVjdCBvdmVyZmxvdyBpbiB0ZXN0c1xuICBtb2NrT3ZlcmZsb3cgPSB0cnVlO1xuICByZXR1cm4gY2hpbGRyZW47XG59O1xuXG5jb25zdCBzY29wZSA9IHtFekJ1dHRvbiwgRXpUYWJsZSwgRXpQYWdlLCBFekNhcmQsIEV6SGVhZGluZywgRXpBbGVydCwgRXpUZXh0U3R5bGV9O1xuXG5kZXNjcmliZSgnRXpUYWJsZScsICgpID0+IHtcbiAgdmlzdWFsU25hcHNob3RzKHttYXJrZG93biwgc2NvcGV9KTtcbiAgdmlzdWFsU25hcHNob3RzKHttYXJrZG93bjogcmVncmVzc2lvblRlc3RzLCBzY29wZTogey4uLnNjb3BlLCBTZXRPdmVyZmxvd319KTtcbiAgYWZ0ZXJFYWNoKGNsZWFudXApO1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIG1vY2tPdmVyZmxvdyA9IGZhbHNlO1xuICB9KTtcblxuICBjb25zdCBjb2x1bW5zID0gW1xuICAgIHtoZWFkaW5nOiAnU3RvcmUgbmFtZScsIGNvbXBvbmVudDogKHtpdGVtfSkgPT4gaXRlbS5zdG9yZSwga2V5OiAnc3RvcmUnfSxcbiAgICB7aGVhZGluZzogJ1RvdGFsIHNhbGVzJywgbnVtZXJpYzogdHJ1ZSwga2V5OiAndG90YWwnfSxcbiAgICB7aGVhZGluZzogJ0F2ZXJhZ2Ugb3JkZXIgdmFsdWUnLCBudW1lcmljOiB0cnVlLCBrZXk6ICdhdmVyYWdlJ30sXG4gIF07XG4gIGNvbnN0IGl0ZW1zID0gW1xuICAgIHtpZDogJyMwMDQnLCBzdG9yZTogJzEyMyBFeGFtcGxlIFN0b3JlJywgdG90YWw6IDIzMjY3LCBhdmVyYWdlOiAzMjcuNzl9LFxuICAgIHtpZDogJyMwMDcnLCBzdG9yZTogJzQ1IE1lYWRvd3ZpZXcgTGFuZScsIHRvdGFsOiAyMjc4OCwgYXZlcmFnZTogMzY3LjU1fSxcbiAgXTtcblxuICBkZXNjcmliZSgnY29sdW1uIHNvcnRpbmcnLCAoKSA9PiB7XG4gICAgZGVzY3JpYmUoJ3doZW4gdGhlIHVzZXIgcmVxdWVzdHMgYSBjb2x1bW4gdG8gYmUgc29ydGVkJywgKCkgPT4ge1xuICAgICAgY29uc3Qgb25Tb3J0Q2xpY2sgPSBqZXN0LmZuKCk7XG4gICAgICBjb25zdCBzb3J0YWJsZUNvbHVtbnMgPSBbXG4gICAgICAgIHtoZWFkaW5nOiAnU3RvcmUgbmFtZScsIGtleTogJ3N0b3JlJywgc29ydGFibGU6IHRydWV9LFxuICAgICAgICB7aGVhZGluZzogJ1RvdGFsIHNhbGVzJywga2V5OiAndG90YWwnLCBzb3J0YWJsZTogdHJ1ZX0sXG4gICAgICBdO1xuICAgICAgY29uc3QgcHJvcHMgPSB7Y29sdW1uczogc29ydGFibGVDb2x1bW5zLCBpdGVtcywgb25Tb3J0Q2xpY2t9O1xuICAgICAgY29uc3QgbW9ja0V2ZW50ID0gZXhwZWN0LmFueShPYmplY3QpO1xuXG4gICAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgICAgb25Tb3J0Q2xpY2subW9ja0NsZWFyKCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ25vdGlmaWVzIHRoZSBjbGllbnQgdGhhdCBzb3J0IGlzIHJlcXVlc3RlZCcsICgpID0+IHtcbiAgICAgICAgY29uc3Qge2dldEJ5VGV4dH0gPSBmdWxsUmVuZGVyKDxFelRhYmxlIHsuLi5wcm9wc30gLz4pO1xuXG4gICAgICAgIGZpcmVFdmVudC5jbGljayhnZXRCeVRleHQoc29ydGFibGVDb2x1bW5zWzBdLmhlYWRpbmcpKTtcblxuICAgICAgICBleHBlY3Qob25Tb3J0Q2xpY2spLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcbiAgICAgICAgZXhwZWN0KG9uU29ydENsaWNrKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgICBtb2NrRXZlbnQsXG4gICAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgICAgY29sdW1uOiBleHBlY3Qub2JqZWN0Q29udGFpbmluZyhzb3J0YWJsZUNvbHVtbnNbMF0pLFxuICAgICAgICAgICAgZGlyZWN0aW9uOiAnYXNjJyxcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdkb2VzIE5PVCBub3RpZnkgdGhlIGNsaWVudCBvZiBhIHNvcnQgd2hlbiBhIGNvbHVtbiBpcyBub3Qgc29ydGFibGUnLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHtnZXRCeVRleHR9ID0gZnVsbFJlbmRlcihcbiAgICAgICAgICA8RXpUYWJsZVxuICAgICAgICAgICAgey4uLnByb3BzfVxuICAgICAgICAgICAgY29sdW1ucz17W1xuICAgICAgICAgICAgICB7aGVhZGluZzogJ1N0b3JlIG5hbWUnLCBhY2Nlc3NvcjogJ25hbWUnLCBzb3J0YWJsZTogZmFsc2V9LFxuICAgICAgICAgICAgICB7aGVhZGluZzogJ1RvdGFsIHNhbGVzJywgYWNjZXNzb3I6ICd0b3RhbCcsIHNvcnRhYmxlOiB0cnVlfSxcbiAgICAgICAgICAgIF19XG4gICAgICAgICAgLz5cbiAgICAgICAgKTtcblxuICAgICAgICBmaXJlRXZlbnQuY2xpY2soZ2V0QnlUZXh0KHNvcnRhYmxlQ29sdW1uc1swXS5oZWFkaW5nKSk7XG5cbiAgICAgICAgZXhwZWN0KG9uU29ydENsaWNrKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdjYW4gc29ydCBhIHNpbmdsZSBjb2x1bW4gaW4gYm90aCBhc2NlbmRpbmcgYW5kIGRlc2NlbmRpbmcgb3JkZXInLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHtnZXRCeVRleHR9ID0gZnVsbFJlbmRlcig8RXpUYWJsZSB7Li4ucHJvcHN9IC8+KTtcblxuICAgICAgICBmaXJlRXZlbnQuY2xpY2soZ2V0QnlUZXh0KHNvcnRhYmxlQ29sdW1uc1sxXS5oZWFkaW5nKSk7XG5cbiAgICAgICAgZXhwZWN0KG9uU29ydENsaWNrKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgICBtb2NrRXZlbnQsXG4gICAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgICAgY29sdW1uOiBleHBlY3Qub2JqZWN0Q29udGFpbmluZyhzb3J0YWJsZUNvbHVtbnNbMV0pLFxuICAgICAgICAgICAgZGlyZWN0aW9uOiAnYXNjJyxcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuXG4gICAgICAgIGZpcmVFdmVudC5jbGljayhnZXRCeVRleHQoc29ydGFibGVDb2x1bW5zWzFdLmhlYWRpbmcpKTtcblxuICAgICAgICBleHBlY3Qob25Tb3J0Q2xpY2spLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAgIG1vY2tFdmVudCxcbiAgICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgICBjb2x1bW46IGV4cGVjdC5vYmplY3RDb250YWluaW5nKHNvcnRhYmxlQ29sdW1uc1sxXSksXG4gICAgICAgICAgICBkaXJlY3Rpb246ICdkZXNjJyxcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdzaG91bGQgbm90IGNoYW5nZSB0aGUgc29ydCBvcmRlciBpZiB0aGUgcHJvdmlkZWQgb25Tb3J0Q2xpY2sgY2FsbGJhY2sgcHJldmVudHMgZGVmYXVsdCcsICgpID0+IHtcbiAgICAgICAgY29uc3Qge2dldEJ5VGV4dH0gPSBmdWxsUmVuZGVyKDxFelRhYmxlIHsuLi5wcm9wc30gLz4pO1xuXG4gICAgICAgIG9uU29ydENsaWNrLm1vY2tJbXBsZW1lbnRhdGlvbihldmVudCA9PiBldmVudC5wcmV2ZW50RGVmYXVsdCgpKTtcblxuICAgICAgICBmaXJlRXZlbnQuY2xpY2soZ2V0QnlUZXh0KHNvcnRhYmxlQ29sdW1uc1sxXS5oZWFkaW5nKSk7XG5cbiAgICAgICAgZXhwZWN0KG9uU29ydENsaWNrKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgICBtb2NrRXZlbnQsXG4gICAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgICAgY29sdW1uOiBleHBlY3Qub2JqZWN0Q29udGFpbmluZyhzb3J0YWJsZUNvbHVtbnNbMV0pLFxuICAgICAgICAgICAgZGlyZWN0aW9uOiAnYXNjJyxcbiAgICAgICAgICB9KVxuICAgICAgICApO1xuXG4gICAgICAgIGZpcmVFdmVudC5jbGljayhnZXRCeVRleHQoc29ydGFibGVDb2x1bW5zWzFdLmhlYWRpbmcpKTtcblxuICAgICAgICBleHBlY3Qob25Tb3J0Q2xpY2spLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAgIG1vY2tFdmVudCxcbiAgICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgICBjb2x1bW46IGV4cGVjdC5vYmplY3RDb250YWluaW5nKHNvcnRhYmxlQ29sdW1uc1sxXSksXG4gICAgICAgICAgICBkaXJlY3Rpb246ICdhc2MnLFxuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2J1bGstc2VsZWN0JywgKCkgPT4ge1xuICAgIGZ1bmN0aW9uIHJlbmRlcihwcm9wcykge1xuICAgICAgY29uc3Qge3F1ZXJ5QnlMYWJlbFRleHQsIHF1ZXJ5QWxsQnlMYWJlbFRleHR9ID0gZnVsbFJlbmRlcig8RXpUYWJsZSB7Li4ucHJvcHN9IC8+KTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGJ1bGtTZWxlY3RJbnB1dDogcXVlcnlCeUxhYmVsVGV4dCgnU2VsZWN0IGFsbCcpLFxuICAgICAgICByb3dTZWxlY3RJbnB1dHM6IHF1ZXJ5QWxsQnlMYWJlbFRleHQoJ1NlbGVjdCByb3cnKSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgZGVzY3JpYmUoJ3doZW4gYSBidWxrLXNlbGVjdCBpcyByZXF1ZXN0ZWQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBvblJvd1NlbGVjdENsaWNrID0gamVzdC5mbigpO1xuICAgICAgY29uc3Qgb25CdWxrU2VsZWN0Q2xpY2sgPSBqZXN0LmZuKCk7XG4gICAgICBjb25zdCBpc1Jvd1NlbGVjdGVkID0gamVzdC5mbigpIGFzIGFueTtcbiAgICAgIGNvbnN0IHNlbGVjdGlvbiA9IHtvbkJ1bGtTZWxlY3RDbGljaywgb25Sb3dTZWxlY3RDbGljaywgaXNSb3dTZWxlY3RlZH07XG4gICAgICBjb25zdCBwcm9wcyA9IHtjb2x1bW5zLCBpdGVtcywgc2VsZWN0aW9ufTtcblxuICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAgIG9uUm93U2VsZWN0Q2xpY2subW9ja0NsZWFyKCk7XG4gICAgICAgIG9uQnVsa1NlbGVjdENsaWNrLm1vY2tDbGVhcigpO1xuICAgICAgICBpc1Jvd1NlbGVjdGVkLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiBmYWxzZSk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3JlbmRlcnMgYSBidWxrLXNlbGVjdCBpbnB1dCBpbiBhIGNvbHVtbiBoZWFkZXInLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHtidWxrU2VsZWN0SW5wdXR9ID0gcmVuZGVyKHByb3BzKTtcbiAgICAgICAgZXhwZWN0KGJ1bGtTZWxlY3RJbnB1dCkubm90LnRvQmVOdWxsKCk7XG4gICAgICB9KTtcblxuICAgICAgaXQoJ3JlbmRlcnMgYSByb3ctc2VsZWN0IGlucHV0IGZvciBlYWNoIHJvdycsICgpID0+IHtcbiAgICAgICAgY29uc3Qge3Jvd1NlbGVjdElucHV0c30gPSByZW5kZXIocHJvcHMpO1xuICAgICAgICBleHBlY3Qocm93U2VsZWN0SW5wdXRzKS50b0hhdmVMZW5ndGgoaXRlbXMubGVuZ3RoKTtcbiAgICAgIH0pO1xuXG4gICAgICBkZXNjcmliZSgndGhlIGJ1bGstc2VsZWN0IGlucHV0JywgKCkgPT4ge1xuICAgICAgICBpdCgnY2FsbHMgdGhlIHByb3ZpZGVkIGNsaWNrIGhhbmRsZXIgd2hlbiB0aGUgaW5wdXQgc3RhdGUgY2hhbmdlcycsICgpID0+IHtcbiAgICAgICAgICBjb25zdCB7YnVsa1NlbGVjdElucHV0fSA9IHJlbmRlcihwcm9wcyk7XG5cbiAgICAgICAgICBidWxrU2VsZWN0SW5wdXQuY2xpY2soKTtcblxuICAgICAgICAgIGV4cGVjdChvbkJ1bGtTZWxlY3RDbGljaykudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDEpO1xuICAgICAgICAgIGV4cGVjdChvbkJ1bGtTZWxlY3RDbGljaykudG9IYXZlQmVlbkNhbGxlZFdpdGgoZXhwZWN0LmFueShPYmplY3QpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZGVzY3JpYmUoJ2NoZWNrZWQgc3RhdGUnLCAoKSA9PiB7XG4gICAgICAgICAgbGV0IGV4cGVjdGVkU3RhdGU7XG5cbiAgICAgICAgICBhZnRlckVhY2goKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qge2J1bGtTZWxlY3RJbnB1dH0gPSByZW5kZXIocHJvcHMpO1xuICAgICAgICAgICAgZXhwZWN0KGJ1bGtTZWxlY3RJbnB1dC5jaGVja2VkKS50b0JlKGV4cGVjdGVkU3RhdGUpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaXQoJ2lzIGNoZWNrZWQgd2hlbiBldmVyeSByb3cgaGFzIGJlZW4gc2VsZWN0ZWQnLCAoKSA9PiB7XG4gICAgICAgICAgICBpc1Jvd1NlbGVjdGVkLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB0cnVlKTtcbiAgICAgICAgICAgIGV4cGVjdGVkU3RhdGUgPSB0cnVlO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaXQoJ2lzIG5vdCBjaGVja2VkIHdoZW4gb25seSBzb21lIHJvd3MgYXJlIHNlbGVjdGVkJywgKCkgPT4ge1xuICAgICAgICAgICAgaXNSb3dTZWxlY3RlZC5tb2NrSW1wbGVtZW50YXRpb24oaXRlbSA9PiBpdGVtLmlkID09PSBpdGVtc1swXS5pZCk7XG4gICAgICAgICAgICBleHBlY3RlZFN0YXRlID0gZmFsc2U7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpdCgnaXMgbm90IGNoZWNrZWQgd2hlbiBubyByb3dzIGFyZSBzZWxlY3RlZCcsICgpID0+IHtcbiAgICAgICAgICAgIGlzUm93U2VsZWN0ZWQubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IGZhbHNlKTtcbiAgICAgICAgICAgIGV4cGVjdGVkU3RhdGUgPSBmYWxzZTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgZGVzY3JpYmUoJ3RoZSByb3ctc2VsZWN0IGlucHV0JywgKCkgPT4ge1xuICAgICAgICBpdCgnY2FsbHMgdGhlIHByb3ZpZGVkIGNsaWNrIGhhbmRsZXIgd2hlbiBjbGlja2VkJywgKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHtyb3dTZWxlY3RJbnB1dHN9ID0gcmVuZGVyKHByb3BzKTtcblxuICAgICAgICAgIGZpcmVFdmVudC5jbGljayhyb3dTZWxlY3RJbnB1dHNbMF0pO1xuXG4gICAgICAgICAgZXhwZWN0KG9uUm93U2VsZWN0Q2xpY2spLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcbiAgICAgICAgICBleHBlY3Qob25Sb3dTZWxlY3RDbGljaykudG9IYXZlQmVlbkNhbGxlZFdpdGgoZXhwZWN0LmFueShPYmplY3QpLCB7aXRlbTogaXRlbXNbMF19KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ2RldGVybWluZXMgaXRzIGNoZWNrZWQgc3RhdGUgYmFzZWQgb24gdGhlIHByb3ZpZGVkIGZ1bmN0aW9uJywgKCkgPT4ge1xuICAgICAgICAgIGlzUm93U2VsZWN0ZWQubW9ja0ltcGxlbWVudGF0aW9uKGl0ZW0gPT4gaXRlbS5pZCA9PT0gaXRlbXNbMF0uaWQpO1xuXG4gICAgICAgICAgY29uc3Qge3Jvd1NlbGVjdElucHV0c30gPSByZW5kZXIocHJvcHMpO1xuXG4gICAgICAgICAgZXhwZWN0KHJvd1NlbGVjdElucHV0c1swXS5jaGVja2VkKS50b0JlKHRydWUpO1xuICAgICAgICAgIGV4cGVjdChyb3dTZWxlY3RJbnB1dHNbMV0uY2hlY2tlZCkudG9CZShmYWxzZSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnd2hlbiBhIGJ1bGstc2VsZWN0IGZ1bmN0aW9uYWxpdHkgaXMgbm90IHJlcXVlc3RlZCcsICgpID0+IHtcbiAgICAgIGl0KCdkb2VzIG5vdCByZW5kZXIgYSBidWxrLXNlbGVjdCBpbnB1dCBpbiBhIGNvbHVtbiBoZWFkZXInLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHtidWxrU2VsZWN0SW5wdXR9ID0gcmVuZGVyKHtjb2x1bW5zLCBpdGVtc30pO1xuICAgICAgICBleHBlY3QoYnVsa1NlbGVjdElucHV0KS50b0JlTnVsbCgpO1xuICAgICAgfSk7XG5cbiAgICAgIGl0KCdkb2VzIG5vdCByZW5kZXIgYSByb3ctc2VsZWN0IGlucHV0IGZvciBlYWNoIHJvdycsICgpID0+IHtcbiAgICAgICAgY29uc3Qge3Jvd1NlbGVjdElucHV0c30gPSByZW5kZXIoe2NvbHVtbnMsIGl0ZW1zfSk7XG4gICAgICAgIGV4cGVjdChyb3dTZWxlY3RJbnB1dHNbMF0pLnRvQmVVbmRlZmluZWQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBtZWV0IGFjY2Vzc2liaWxpdHkgZ3VpZGVsaW5lcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHdyYXBwZXIgPSByZW5kZXJUb0h0bWwoXG4gICAgICAgIDxFelRhYmxlXG4gICAgICAgICAgY29sdW1ucz17Y29sdW1uc31cbiAgICAgICAgICBpdGVtcz17aXRlbXN9XG4gICAgICAgICAgc2VsZWN0aW9uPXt7XG4gICAgICAgICAgICBvbkJ1bGtTZWxlY3RDbGljazogKCkgPT4gbnVsbCxcbiAgICAgICAgICAgIG9uUm93U2VsZWN0Q2xpY2s6ICgpID0+IG51bGwsXG4gICAgICAgICAgICBpc1Jvd1NlbGVjdGVkOiAoKSA9PiBmYWxzZSxcbiAgICAgICAgICB9fVxuICAgICAgICAvPlxuICAgICAgKTtcbiAgICAgIGNvbnN0IGFjdHVhbCA9IGF3YWl0IGF4ZSh3cmFwcGVyKTtcbiAgICAgIGV4cGVjdChhY3R1YWwpLnRvSGF2ZU5vVmlvbGF0aW9ucygpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgndGFibGUgc2VsZWN0IGJhbm5lcicsICgpID0+IHtcbiAgICBjb25zdCBkYXRhID0gW1xuICAgICAge2ZpcnN0OiAnVGlmZmFueScsIGxhc3Q6ICdNb3Jpbid9LFxuICAgICAge2ZpcnN0OiAnTWl0Y2hlbGwnLCBsYXN0OiAnSG9mZm1hbid9LFxuICAgICAge2ZpcnN0OiAnTMOpbycsIGxhc3Q6ICdHb256YWxleid9LFxuICAgICAge2ZpcnN0OiAnQWxiZXJ0bycsIGxhc3Q6ICdBcmlhcyd9LFxuICAgICAge2ZpcnN0OiAnT2xpdmllcicsIGxhc3Q6ICdDYW1wb3MnfSxcbiAgICAgIHtmaXJzdDogJ8OWbcO8cicsIGxhc3Q6ICdFa2ljaSd9LFxuICAgICAge2ZpcnN0OiAnw4luaW8nLCBsYXN0OiAnQmFycm9zJ30sXG4gICAgICB7Zmlyc3Q6ICdBdmEnLCBsYXN0OiAnTWEnfSxcbiAgICAgIHtmaXJzdDogJ05vcmJlcnRhJywgbGFzdDogJ05vdmFlcyd9LFxuICAgICAge2ZpcnN0OiAnRGVuaScsIGxhc3Q6ICdMdWJiZXJzJ30sXG4gICAgXTtcblxuICAgIGl0KCdzaG93cyBvcHRpb24gdG8gc2VsZWN0IGFsbCByb3dzIHdoZW4gYSBwYWdlIGlzIHNlbGVjdGVkJywgKCkgPT4ge1xuICAgICAgY29uc3Qgb25TZWxlY3RBbGxDbGljayA9IGplc3QuZm4oKTtcblxuICAgICAgY29uc3Qge2dldEJ5VGV4dH0gPSBmdWxsUmVuZGVyKFxuICAgICAgICA8RXpUYWJsZVxuICAgICAgICAgIHRpdGxlPVwiQWxsIFN0b3Jlc1wiXG4gICAgICAgICAgc3VidGl0bGU9XCJDb21wYXJlZCB0byB0aGUgc2FtZSBwZXJpb2QgbGFzdCB5ZWFyXCJcbiAgICAgICAgICBzZWxlY3Rpb249e3tcbiAgICAgICAgICAgIG9uUm93U2VsZWN0Q2xpY2s6ICgpID0+IHt9LFxuICAgICAgICAgICAgb25CdWxrU2VsZWN0Q2xpY2s6ICgpID0+IHt9LFxuICAgICAgICAgICAgaXNSb3dTZWxlY3RlZDogKCkgPT4gdHJ1ZSxcbiAgICAgICAgICAgIG9uU2VsZWN0QWxsQ2xpY2ssXG4gICAgICAgICAgICBvblNlbGVjdE5vbmVDbGljazogKCkgPT4ge30sXG4gICAgICAgICAgfX1cbiAgICAgICAgICBjb2x1bW5zPXtbXG4gICAgICAgICAgICB7aGVhZGluZzogJ0ZpcnN0IE5hbWUnLCBrZXk6ICdmaXJzdCd9LFxuICAgICAgICAgICAge2hlYWRpbmc6ICdMYXN0IE5hbWUnLCBrZXk6ICdsYXN0J30sXG4gICAgICAgICAgXX1cbiAgICAgICAgICBpdGVtcz17ZGF0YS5zbGljZSgwLCA1KX1cbiAgICAgICAgICBwYWdpbmF0aW9uPXt7XG4gICAgICAgICAgICBjdXJyZW50UGFnZTogMSxcbiAgICAgICAgICAgIHRvdGFsUm93czogMTAsXG4gICAgICAgICAgICByb3dzUGVyUGFnZTogNSxcbiAgICAgICAgICAgIHJvd3NQZXJQYWdlT3B0aW9uczogWzUsIDEwLCAyMCwgMzBdLFxuICAgICAgICAgICAgb25QcmV2UGFnZUNsaWNrOiAoKSA9PiB7fSxcbiAgICAgICAgICAgIG9uTmV4dFBhZ2VDbGljazogKCkgPT4ge30sXG4gICAgICAgICAgICBvblJvd3NQZXJQYWdlQ2hhbmdlOiAoKSA9PiB7fSxcbiAgICAgICAgICB9fVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgY29uc3Qgc2VsZWN0QWxsQnV0dG9uID0gZ2V0QnlUZXh0KCdTZWxlY3QgYWxsIDEwIHJvd3MnKTtcblxuICAgICAgZmlyZUV2ZW50LmNsaWNrKHNlbGVjdEFsbEJ1dHRvbik7XG5cbiAgICAgIGV4cGVjdChvblNlbGVjdEFsbENsaWNrKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdjbGlja2FibGUgcm93cycsICgpID0+IHtcbiAgICBjb25zdCBkYXRhID0gW1xuICAgICAge2ZpcnN0OiAnVGlmZmFueScsIGxhc3Q6ICdNb3Jpbid9LFxuICAgICAge2ZpcnN0OiAnTWl0Y2hlbGwnLCBsYXN0OiAnSG9mZm1hbid9LFxuICAgIF07XG5cbiAgICBjb25zdCBsaW5rID0gb25jbGljayA9PiAoe2l0ZW06IHtmaXJzdCwgbGFzdH0sIGxpbmtSZWZ9KSA9PiAoXG4gICAgICA8ZGl2PlxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIDxhIGhyZWY9XCIvXCIgcmVmPXtsaW5rUmVmfSBvbkNsaWNrPXtvbmNsaWNrfT5cbiAgICAgICAgICAgIHtmaXJzdH0ge2xhc3R9XG4gICAgICAgICAgPC9hPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG5cbiAgICBpdCgnY2FsbHMgdGhlIG9uQ2xpY2sgb2YgdGhlIGxpbmsgdGFyZ2V0IHdoZW4gY2xpY2tpbmcgaW5zaWRlIGEgdGFibGUgcm93JywgKCkgPT4ge1xuICAgICAgY29uc3Qgc3B5ID0gamVzdC5mbigpO1xuXG4gICAgICBjb25zdCB7Z2V0QnlUZXh0fSA9IGZ1bGxSZW5kZXIoXG4gICAgICAgIDxFelRhYmxlXG4gICAgICAgICAgdGl0bGU9XCJBbGwgU3RvcmVzXCJcbiAgICAgICAgICBzdWJ0aXRsZT1cIkNvbXBhcmVkIHRvIHRoZSBzYW1lIHBlcmlvZCBsYXN0IHllYXJcIlxuICAgICAgICAgIGNvbHVtbnM9e1tcbiAgICAgICAgICAgIHtoZWFkaW5nOiAnTGluaycsIGNvbXBvbmVudDogbGluayhzcHkpLCBrZXk6ICdsaW5rJ30sXG4gICAgICAgICAgICB7aGVhZGluZzogJ0ZpcnN0IE5hbWUnLCBrZXk6ICdmaXJzdCd9LFxuICAgICAgICAgICAge2hlYWRpbmc6ICdMYXN0IE5hbWUnLCBrZXk6ICdsYXN0J30sXG4gICAgICAgICAgXX1cbiAgICAgICAgICBpdGVtcz17ZGF0YX1cbiAgICAgICAgLz5cbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGNlbGwgPSBnZXRCeVRleHQoJ1RpZmZhbnknKTtcblxuICAgICAgZmlyZUV2ZW50Lm1vdXNlT3ZlcihjZWxsKTtcbiAgICAgIGZpcmVFdmVudC5jbGljayhjZWxsKTtcblxuICAgICAgZXhwZWN0KHNweSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ2RvZXMgTk9UIGNhbGwgdGhlIG9uQ2xpY2sgb2YgdGhlIGxpbmsgdGFyZ2V0IGlmIGNsaWNraW5nIGludGVyYWN0aXZlIGVsZW1lbnRzIGluIHRoZSByb3cnLCAoKSA9PiB7XG4gICAgICBjb25zdCBzcHkgPSBqZXN0LmZuKCk7XG5cbiAgICAgIGNvbnN0IHtxdWVyeUFsbEJ5TGFiZWxUZXh0fSA9IGZ1bGxSZW5kZXIoXG4gICAgICAgIDxFelRhYmxlXG4gICAgICAgICAgdGl0bGU9XCJBbGwgU3RvcmVzXCJcbiAgICAgICAgICBzdWJ0aXRsZT1cIkNvbXBhcmVkIHRvIHRoZSBzYW1lIHBlcmlvZCBsYXN0IHllYXJcIlxuICAgICAgICAgIHNlbGVjdGlvbj17e1xuICAgICAgICAgICAgb25Sb3dTZWxlY3RDbGljazogKCkgPT4ge30sXG4gICAgICAgICAgICBvbkJ1bGtTZWxlY3RDbGljazogKCkgPT4ge30sXG4gICAgICAgICAgICBpc1Jvd1NlbGVjdGVkOiAoKSA9PiB0cnVlLFxuICAgICAgICAgIH19XG4gICAgICAgICAgY29sdW1ucz17W1xuICAgICAgICAgICAge2hlYWRpbmc6ICdMaW5rJywgY29tcG9uZW50OiBsaW5rKHNweSksIGtleTogJ2xpbmsnfSxcbiAgICAgICAgICAgIHtoZWFkaW5nOiAnRmlyc3QgTmFtZScsIGtleTogJ2ZpcnN0J30sXG4gICAgICAgICAgICB7aGVhZGluZzogJ0xhc3QgTmFtZScsIGtleTogJ2xhc3QnfSxcbiAgICAgICAgICBdfVxuICAgICAgICAgIGl0ZW1zPXtkYXRhfVxuICAgICAgICAvPlxuICAgICAgKTtcblxuICAgICAgY29uc3QgY2hlY2tib3ggPSBxdWVyeUFsbEJ5TGFiZWxUZXh0KCdTZWxlY3Qgcm93JylbMF07XG5cbiAgICAgIGZpcmVFdmVudC5jbGljayhjaGVja2JveCk7XG5cbiAgICAgIGV4cGVjdChzcHkpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdhY2Nlc3NvciBwcm9wIGNvbXBhdGliaWxpdHknLCAoKSA9PiB7XG4gICAgbGV0IGNvbXBvbmVudDtcblxuICAgIGNvbnN0IG1hcHBhYmxlQ29sdW1ucyA9IFtcbiAgICAgIHtoZWFkaW5nOiAnTmFtZScsIGFjY2Vzc29yOiAoe2l0ZW19KSA9PiBpdGVtLnN0b3JlfSxcbiAgICAgIHtoZWFkaW5nOiAnU2FsZXMnLCBhY2Nlc3NvcjogJ3RvdGFsJywgbnVtZXJpYzogdHJ1ZX0sXG4gICAgXTtcblxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgY29tcG9uZW50ID0gZnVsbFJlbmRlcihcbiAgICAgICAgPEV6VGFibGVcbiAgICAgICAgICB0aXRsZT1cIkFsbCBTdG9yZXNcIlxuICAgICAgICAgIHN1YnRpdGxlPVwiQ29tcGFyZWQgdG8gdGhlIHNhbWUgcGVyaW9kIGxhc3QgeWVhclwiXG4gICAgICAgICAgY29sdW1ucz17bWFwcGFibGVDb2x1bW5zfVxuICAgICAgICAgIGl0ZW1zPXtpdGVtc31cbiAgICAgICAgLz5cbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnd2hlbiB0aGUgYWNjZXNzb3IgcHJvcCBpcyBhIGZ1bmN0aW9uJywgKCkgPT4ge1xuICAgICAgaXQoJ3JlbmRlcnMgdGhlIHRhYmxlIHByb3Blcmx5JywgKCkgPT4ge1xuICAgICAgICBjb25zdCB7Z2V0QnlUZXh0fSA9IGNvbXBvbmVudDtcblxuICAgICAgICBleHBlY3QoZ2V0QnlUZXh0KCdOYW1lJykpLnRvQmVEZWZpbmVkKCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCd3aGVuIHRoZSBhY2Nlc3NvciBwcm9wIGlzIGEgc3RyaW5nJywgKCkgPT4ge1xuICAgICAgaXQoJ3JlbmRlcnMgdGhlIHRhYmxlIHByb3Blcmx5JywgKCkgPT4ge1xuICAgICAgICBjb25zdCB7Z2V0QnlUZXh0fSA9IGNvbXBvbmVudDtcblxuICAgICAgICBleHBlY3QoZ2V0QnlUZXh0KCdTYWxlcycpKS50b0JlRGVmaW5lZCgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGl0KCdzaG91bGQgbWVldCBhY2Nlc3NpYmlsaXR5IGd1aWRlbGluZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3Qgd3JhcHBlciA9IHJlbmRlclRvSHRtbCg8RXpUYWJsZSBjb2x1bW5zPXtjb2x1bW5zfSBpdGVtcz17aXRlbXN9IC8+KTtcbiAgICBjb25zdCBhY3R1YWwgPSBhd2FpdCBheGUod3JhcHBlcik7XG4gICAgZXhwZWN0KGFjdHVhbCkudG9IYXZlTm9WaW9sYXRpb25zKCk7XG4gIH0pO1xufSk7XG4iXX0=