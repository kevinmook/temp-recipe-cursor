"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _react = _interopRequireDefault(require("react"));

var _react2 = require("@testing-library/react");

var _jestAxe = require("jest-axe");

var _sosia = require("sosia");

var _EzModalTest = _interopRequireDefault(require("./EzModal.test.md"));

var _EzModal = _interopRequireDefault(require("../EzModal"));

var _jestGlobals = require("../../../jest-globals");

afterEach(_react2.cleanup);
var scope = {
  EzModal: _EzModal["default"]
};
describe('EzModal', function () {
  (0, _sosia.visualSnapshots)({
    markdown: _EzModalTest["default"],
    scope: scope
  });
  it('does not render the children if not open', function () {
    var _fullRender = (0, _jestGlobals.fullRender)(_react["default"].createElement(_EzModal["default"], {
      isOpen: false,
      dismissLabel: "dismiss",
      headerText: "header"
    }, _react["default"].createElement("div", null, "foo"))),
        queryByText = _fullRender.queryByText;

    expect(queryByText('foo')).toBeNull();
  });
  it('calls submit handler when submit button is clicked', function () {
    var clickSpy = jest.fn();
    var submitLabel = 'submit';

    var _fullRender2 = (0, _jestGlobals.fullRender)(_react["default"].createElement(_EzModal["default"], {
      isOpen: true,
      submitLabel: submitLabel,
      onSubmit: clickSpy,
      dismissLabel: "dismiss",
      headerText: "header"
    }, "Test")),
        getByText = _fullRender2.getByText;

    _react2.fireEvent.click(getByText(submitLabel));

    expect(clickSpy).toHaveBeenCalled();
  });
  it('calls dismiss handler when dismiss button is clicked', function () {
    var clickSpy = jest.fn();
    var dismissLabel = 'dismiss';

    var _fullRender3 = (0, _jestGlobals.fullRender)(_react["default"].createElement(_EzModal["default"], {
      isOpen: true,
      dismissLabel: dismissLabel,
      submitLabel: "submit",
      onDismiss: clickSpy,
      headerText: "header"
    }, "Test")),
        getByText = _fullRender3.getByText;

    _react2.fireEvent.click(getByText(dismissLabel));

    expect(clickSpy).toHaveBeenCalled();
  });
  it('disables the submit button when the form is submitting', function () {
    var submitLabel = 'submit';

    var _fullRender4 = (0, _jestGlobals.fullRender)(_react["default"].createElement(_EzModal["default"], {
      isOpen: true,
      isSubmitting: true,
      submitLabel: submitLabel,
      dismissLabel: "dismiss",
      headerText: "header"
    }, "test")),
        getByText = _fullRender4.getByText;

    var submitButton = getByText(submitLabel);
    expect(submitButton).toHaveAttribute('disabled');
  });
  it('sets the disabled prop on dismiss button when isSubmitting is true', function () {
    var dismissLabel = 'dismiss';

    var _fullRender5 = (0, _jestGlobals.fullRender)(_react["default"].createElement(_EzModal["default"], {
      isOpen: true,
      isSubmitting: true,
      dismissLabel: dismissLabel,
      headerText: "header"
    }, "test")),
        getByText = _fullRender5.getByText;

    var dismissButton = getByText(dismissLabel);
    expect(dismissButton).toHaveAttribute('disabled');
  });
  /**
   * Accessibility tests.
   */

  describe('Accessibility tests', function () {
    it('should meet accessibility guidelines when required labels / text are given',
    /*#__PURE__*/
    (0, _asyncToGenerator2["default"])(
    /*#__PURE__*/
    _regenerator["default"].mark(function _callee() {
      var _fullRender6, baseElement, unmount, actual;

      return _regenerator["default"].wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _fullRender6 = (0, _jestGlobals.fullRender)(_react["default"].createElement(_EzModal["default"], {
                isOpen: true,
                dismissLabel: "dismiss",
                headerText: "header"
              }, "test")), baseElement = _fullRender6.baseElement, unmount = _fullRender6.unmount;
              unmount();
              _context.next = 4;
              return (0, _jestAxe.axe)(baseElement.innerHTML);

            case 4:
              actual = _context.sent;
              expect(actual).toHaveNoViolations();

            case 6:
            case "end":
              return _context.stop();
          }
        }
      }, _callee);
    })));
    it('should meet accessibility guidelines when all labels / text are given',
    /*#__PURE__*/
    (0, _asyncToGenerator2["default"])(
    /*#__PURE__*/
    _regenerator["default"].mark(function _callee2() {
      var _fullRender7, baseElement, unmount, actual;

      return _regenerator["default"].wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _fullRender7 = (0, _jestGlobals.fullRender)(_react["default"].createElement(_EzModal["default"], {
                isOpen: true,
                headerText: "Header",
                submitLabel: "submit",
                dismissLabel: "dismiss"
              }, "test")), baseElement = _fullRender7.baseElement, unmount = _fullRender7.unmount;
              unmount();
              _context2.next = 4;
              return (0, _jestAxe.axe)(baseElement.innerHTML);

            case 4:
              actual = _context2.sent;
              expect(actual).toHaveNoViolations();

            case 6:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2);
    })));
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL0V6TW9kYWwvX190ZXN0c19fL0V6TW9kYWwudGVzdC50c3giXSwibmFtZXMiOlsiYWZ0ZXJFYWNoIiwiY2xlYW51cCIsInNjb3BlIiwiRXpNb2RhbCIsImRlc2NyaWJlIiwibWFya2Rvd24iLCJyZWdyZXNzaW9uVGVzdHMiLCJpdCIsInF1ZXJ5QnlUZXh0IiwiZXhwZWN0IiwidG9CZU51bGwiLCJjbGlja1NweSIsImplc3QiLCJmbiIsInN1Ym1pdExhYmVsIiwiZ2V0QnlUZXh0IiwiZmlyZUV2ZW50IiwiY2xpY2siLCJ0b0hhdmVCZWVuQ2FsbGVkIiwiZGlzbWlzc0xhYmVsIiwic3VibWl0QnV0dG9uIiwidG9IYXZlQXR0cmlidXRlIiwiZGlzbWlzc0J1dHRvbiIsImJhc2VFbGVtZW50IiwidW5tb3VudCIsImlubmVySFRNTCIsImFjdHVhbCIsInRvSGF2ZU5vVmlvbGF0aW9ucyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFFQTs7QUFFQUEsU0FBUyxDQUFDQyxlQUFELENBQVQ7QUFFQSxJQUFNQyxLQUFLLEdBQUc7QUFBQ0MsRUFBQUEsT0FBTyxFQUFQQTtBQUFELENBQWQ7QUFFQUMsUUFBUSxDQUFDLFNBQUQsRUFBWSxZQUFNO0FBQ3hCLDhCQUFnQjtBQUFDQyxJQUFBQSxRQUFRLEVBQUVDLHVCQUFYO0FBQTRCSixJQUFBQSxLQUFLLEVBQUxBO0FBQTVCLEdBQWhCO0FBRUFLLEVBQUFBLEVBQUUsQ0FBQywwQ0FBRCxFQUE2QyxZQUFNO0FBQUEsc0JBQzdCLDZCQUNwQixnQ0FBQyxtQkFBRDtBQUFTLE1BQUEsTUFBTSxFQUFFLEtBQWpCO0FBQXdCLE1BQUEsWUFBWSxFQUFDLFNBQXJDO0FBQStDLE1BQUEsVUFBVSxFQUFDO0FBQTFELE9BQ0UsbURBREYsQ0FEb0IsQ0FENkI7QUFBQSxRQUM1Q0MsV0FENEMsZUFDNUNBLFdBRDRDOztBQU1uREMs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Y3QnO1xuaW1wb3J0IHtmaXJlRXZlbnQsIGNsZWFudXB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QnO1xuaW1wb3J0IHtheGV9IGZyb20gJ2plc3QtYXhlJztcbmltcG9ydCB7dmlzdWFsU25hcHNob3RzfSBmcm9tICdzb3NpYSc7XG5pbXBvcnQgcmVncmVzc2lvblRlc3RzIGZyb20gJy4vRXpNb2RhbC50ZXN0Lm1kJztcbmltcG9ydCBFek1vZGFsIGZyb20gJy4uL0V6TW9kYWwnO1xuaW1wb3J0IHtzdGFuZGFyZH0gZnJvbSAnLi4vLi4vLi4vdGhlbWVzJztcbmltcG9ydCB7ZnVsbFJlbmRlcn0gZnJvbSAnLi4vLi4vLi4vamVzdC1nbG9iYWxzJztcblxuYWZ0ZXJFYWNoKGNsZWFudXApO1xuXG5jb25zdCBzY29wZSA9IHtFek1vZGFsfTtcblxuZGVzY3JpYmUoJ0V6TW9kYWwnLCAoKSA9PiB7XG4gIHZpc3VhbFNuYXBzaG90cyh7bWFya2Rvd246IHJlZ3Jlc3Npb25UZXN0cywgc2NvcGV9KTtcblxuICBpdCgnZG9lcyBub3QgcmVuZGVyIHRoZSBjaGlsZHJlbiBpZiBub3Qgb3BlbicsICgpID0+IHtcbiAgICBjb25zdCB7cXVlcnlCeVRleHR9ID0gZnVsbFJlbmRlcihcbiAgICAgIDxFek1vZGFsIGlzT3Blbj17ZmFsc2V9IGRpc21pc3NMYWJlbD1cImRpc21pc3NcIiBoZWFkZXJUZXh0PVwiaGVhZGVyXCI+XG4gICAgICAgIDxkaXY+Zm9vPC9kaXY+XG4gICAgICA8L0V6TW9kYWw+XG4gICAgKTtcbiAgICBleHBlY3QocXVlcnlCeVRleHQoJ2ZvbycpKS50b0JlTnVsbCgpO1xuICB9KTtcblxuICBpdCgnY2FsbHMgc3VibWl0IGhhbmRsZXIgd2hlbiBzdWJtaXQgYnV0dG9uIGlzIGNsaWNrZWQnLCAoKSA9PiB7XG4gICAgY29uc3QgY2xpY2tTcHkgPSBqZXN0LmZuKCk7XG4gICAgY29uc3Qgc3VibWl0TGFiZWwgPSAnc3VibWl0JztcbiAgICBjb25zdCB7Z2V0QnlUZXh0fSA9IGZ1bGxSZW5kZXIoXG4gICAgICA8RXpNb2RhbFxuICAgICAgICBpc09wZW5cbiAgICAgICAgc3VibWl0TGFiZWw9e3N1Ym1pdExhYmVsfVxuICAgICAgICBvblN1Ym1pdD17Y2xpY2tTcHl9XG4gICAgICAgIGRpc21pc3NMYWJlbD1cImRpc21pc3NcIlxuICAgICAgICBoZWFkZXJUZXh0PVwiaGVhZGVyXCJcbiAgICAgID5cbiAgICAgICAgVGVzdFxuICAgICAgPC9Fek1vZGFsPlxuICAgICk7XG5cbiAgICBmaXJlRXZlbnQuY2xpY2soZ2V0QnlUZXh0KHN1Ym1pdExhYmVsKSk7XG4gICAgZXhwZWN0KGNsaWNrU3B5KS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gIH0pO1xuXG4gIGl0KCdjYWxscyBkaXNtaXNzIGhhbmRsZXIgd2hlbiBkaXNtaXNzIGJ1dHRvbiBpcyBjbGlja2VkJywgKCkgPT4ge1xuICAgIGNvbnN0IGNsaWNrU3B5ID0gamVzdC5mbigpO1xuICAgIGNvbnN0IGRpc21pc3NMYWJlbCA9ICdkaXNtaXNzJztcbiAgICBjb25zdCB7Z2V0QnlUZXh0fSA9IGZ1bGxSZW5kZXIoXG4gICAgICA8RXpNb2RhbFxuICAgICAgICBpc09wZW5cbiAgICAgICAgZGlzbWlzc0xhYmVsPXtkaXNtaXNzTGFiZWx9XG4gICAgICAgIHN1Ym1pdExhYmVsPVwic3VibWl0XCJcbiAgICAgICAgb25EaXNtaXNzPXtjbGlja1NweX1cbiAgICAgICAgaGVhZGVyVGV4dD1cImhlYWRlclwiXG4gICAgICA+XG4gICAgICAgIFRlc3RcbiAgICAgIDwvRXpNb2RhbD5cbiAgICApO1xuXG4gICAgZmlyZUV2ZW50LmNsaWNrKGdldEJ5VGV4dChkaXNtaXNzTGFiZWwpKTtcbiAgICBleHBlY3QoY2xpY2tTcHkpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgfSk7XG5cbiAgaXQoJ2Rpc2FibGVzIHRoZSBzdWJtaXQgYnV0dG9uIHdoZW4gdGhlIGZvcm0gaXMgc3VibWl0dGluZycsICgpID0+IHtcbiAgICBjb25zdCBzdWJtaXRMYWJlbCA9ICdzdWJtaXQnO1xuICAgIGNvbnN0IHtnZXRCeVRleHR9ID0gZnVsbFJlbmRlcihcbiAgICAgIDxFek1vZGFsXG4gICAgICAgIGlzT3BlblxuICAgICAgICBpc1N1Ym1pdHRpbmdcbiAgICAgICAgc3VibWl0TGFiZWw9e3N1Ym1pdExhYmVsfVxuICAgICAgICBkaXNtaXNzTGFiZWw9XCJkaXNtaXNzXCJcbiAgICAgICAgaGVhZGVyVGV4dD1cImhlYWRlclwiXG4gICAgICA+XG4gICAgICAgIHRlc3RcbiAgICAgIDwvRXpNb2RhbD5cbiAgICApO1xuICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IGdldEJ5VGV4dChzdWJtaXRMYWJlbCk7XG4gICAgZXhwZWN0KHN1Ym1pdEJ1dHRvbikudG9IYXZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICB9KTtcblxuICBpdCgnc2V0cyB0aGUgZGlzYWJsZWQgcHJvcCBvbiBkaXNtaXNzIGJ1dHRvbiB3aGVuIGlzU3VibWl0dGluZyBpcyB0cnVlJywgKCkgPT4ge1xuICAgIGNvbnN0IGRpc21pc3NMYWJlbCA9ICdkaXNtaXNzJztcbiAgICBjb25zdCB7Z2V0QnlUZXh0fSA9IGZ1bGxSZW5kZXIoXG4gICAgICA8RXpNb2RhbCBpc09wZW4gaXNTdWJtaXR0aW5nIGRpc21pc3NMYWJlbD17ZGlzbWlzc0xhYmVsfSBoZWFkZXJUZXh0PVwiaGVhZGVyXCI+XG4gICAgICAgIHRlc3RcbiAgICAgIDwvRXpNb2RhbD5cbiAgICApO1xuICAgIGNvbnN0IGRpc21pc3NCdXR0b24gPSBnZXRCeVRleHQoZGlzbWlzc0xhYmVsKTtcbiAgICBleHBlY3QoZGlzbWlzc0J1dHRvbikudG9IYXZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuICB9KTtcblxuICAvKipcbiAgICogQWNjZXNzaWJpbGl0eSB0ZXN0cy5cbiAgICovXG4gIGRlc2NyaWJlKCdBY2Nlc3NpYmlsaXR5IHRlc3RzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgbWVldCBhY2Nlc3NpYmlsaXR5IGd1aWRlbGluZXMgd2hlbiByZXF1aXJlZCBsYWJlbHMgLyB0ZXh0IGFyZSBnaXZlbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHtiYXNlRWxlbWVudCwgdW5tb3VudH0gPSBmdWxsUmVuZGVyKFxuICAgICAgICA8RXpNb2RhbCBpc09wZW4gZGlzbWlzc0xhYmVsPVwiZGlzbWlzc1wiIGhlYWRlclRleHQ9XCJoZWFkZXJcIj5cbiAgICAgICAgICB0ZXN0XG4gICAgICAgIDwvRXpNb2RhbD5cbiAgICAgICk7XG4gICAgICB1bm1vdW50KCk7XG4gICAgICBjb25zdCBhY3R1YWwgPSBhd2FpdCBheGUoYmFzZUVsZW1lbnQuaW5uZXJIVE1MKTtcbiAgICAgIGV4cGVjdChhY3R1YWwpLnRvSGF2ZU5vVmlvbGF0aW9ucygpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBtZWV0IGFjY2Vzc2liaWxpdHkgZ3VpZGVsaW5lcyB3aGVuIGFsbCBsYWJlbHMgLyB0ZXh0IGFyZSBnaXZlbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHtiYXNlRWxlbWVudCwgdW5tb3VudH0gPSBmdWxsUmVuZGVyKFxuICAgICAgICA8RXpNb2RhbCBpc09wZW4gaGVhZGVyVGV4dD1cIkhlYWRlclwiIHN1Ym1pdExhYmVsPVwic3VibWl0XCIgZGlzbWlzc0xhYmVsPVwiZGlzbWlzc1wiPlxuICAgICAgICAgIHRlc3RcbiAgICAgICAgPC9Fek1vZGFsPlxuICAgICAgKTtcbiAgICAgIHVubW91bnQoKTtcbiAgICAgIGNvbnN0IGFjdHVhbCA9IGF3YWl0IGF4ZShiYXNlRWxlbWVudC5pbm5lckhUTUwpO1xuICAgICAgZXhwZWN0KGFjdHVhbCkudG9IYXZlTm9WaW9sYXRpb25zKCk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXX0=