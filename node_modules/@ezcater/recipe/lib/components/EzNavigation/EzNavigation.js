"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));

var _objectWithoutProperties2 = _interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));

var _react = _interopRequireWildcard(require("react"));

var _en = _interopRequireDefault(require("./en"));

var _Logo = _interopRequireDefault(require("./Logo"));

var _Menu = _interopRequireDefault(require("./Menu"));

var _Hamburger = _interopRequireDefault(require("./Hamburger"));

var _UserMenu = _interopRequireDefault(require("./UserMenu"));

var _Notifications = require("./Notifications");

var _EzNavigation = require("./EzNavigation.styles");

var _hooks = require("../../utils/hooks");

var countNotifications = function countNotifications(links) {
  return links.reduce(function (sum, link) {
    if (!link.notifications) return sum;
    var count = Number.isInteger(link.notifications) ? Number(link.notifications) : 0;
    return sum + count;
  }, 0);
};

var EzNavigation = function EzNavigation(_ref) {
  var children = _ref.children,
      links = _ref.links,
      utilityLinks = _ref.utilityLinks,
      userMenu = _ref.userMenu,
      _ref$home = _ref.home,
      logo = _ref$home.logo,
      homeLink = (0, _objectWithoutProperties2["default"])(_ref$home, ["logo"]);

  var _useTranslation = (0, _hooks.useTranslation)(_en["default"]),
      t = _useTranslation.t;

  var _useState = (0, _react.useState)(true),
      _useState2 = (0, _slicedToArray2["default"])(_useState, 2),
      hidden = _useState2[0],
      setHidden = _useState2[1];

  var handleSidebarToggle = function handleSidebarToggle() {
    return setHidden(function (s) {
      return !s;
    });
  };

  var notificationSummary = countNotifications(links) + countNotifications(utilityLinks || []);
  return _react["default"].createElement(_EzNavigation.Wrapper, null, _react["default"].createElement(_EzNavigation.NavWrapper, {
    opened: hidden
  }, _react["default"].createElement(_Hamburger["default"], {
    opened: !hidden,
    onClick: handleSidebarToggle
  }), notificationSummary > 0 && _react["default"].createElement(_Notifications.NotificationCounter, {
    onClick: handleSidebarToggle,
    opened: !hidden
  }, notificationSummary), _react["default"].createElement(_Logo["default"], {
    link: homeLink,
    logo: logo
  }), _react["default"].createElement(_EzNavigation.MenuContent, {
    opened: !hidden
  }, _react["default"].createElement(_EzNavigation.Menus, {
    primary: true,
    "aria-label": t('Primary navigation')
  }, links.map(function (link, i) {
    return _react["default"].createElement(_Menu["default"], {
      key: i,
      link: link,
      sidebarToggle: handleSidebarToggle
    });
  })), utilityLinks && _react["default"].createElement(_EzNavigation.Menus, {
    "aria-label": t('Utility navigation')
  }, utilityLinks && utilityLinks.map(function (link, i) {
    return _react["default"].createElement(_Menu["default"], {
      key: i,
      link: link,
      sidebarToggle: handleSidebarToggle
    });
  })), userMenu && _react["default"].createElement(_EzNavigation.Menus, {
    "aria-label": t('User menu')
  }, _react["default"].createElement(_UserMenu["default"], {
    name: userMenu.name,
    links: userMenu.links,
    sidebarToggle: handleSidebarToggle
  })))), _react["default"].createElement(_EzNavigation.ContentContainer, {
    opened: hidden
  }, children));
};

var _default = EzNavigation;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21wb25lbnRzL0V6TmF2aWdhdGlvbi9Fek5hdmlnYXRpb24udHN4Il0sIm5hbWVzIjpbImNvdW50Tm90aWZpY2F0aW9ucyIsImxpbmtzIiwicmVkdWNlIiwic3VtIiwibGluayIsIm5vdGlmaWNhdGlvbnMiLCJjb3VudCIsIk51bWJlciIsImlzSW50ZWdlciIsIkV6TmF2aWdhdGlvbiIsImNoaWxkcmVuIiwidXRpbGl0eUxpbmtzIiwidXNlck1lbnUiLCJob21lIiwibG9nbyIsImhvbWVMaW5rIiwiZW4iLCJ0IiwiaGlkZGVuIiwic2V0SGlkZGVuIiwiaGFuZGxlU2lkZWJhclRvZ2dsZSIsInMiLCJub3RpZmljYXRpb25TdW1tYXJ5IiwibWFwIiwiaSIsIm5hbWUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUVBOztBQUVBLElBQU1BLGtCQUFrQixHQUFHLFNBQXJCQSxrQkFBcUIsQ0FBQUMsS0FBSztBQUFBLFNBQzlCQSxLQUFLLENBQUNDLE1BQU4sQ0FBYSxVQUFDQyxHQUFELEVBQU1DLElBQU4sRUFBZTtBQUMxQixRQUFJLENBQUNBLElBQUksQ0FBQ0MsYUFBVixFQUF5QixPQUFPRixHQUFQO0FBQ3pCLFFBQU1HLEtBQUssR0FBR0MsTUFBTSxDQUFDQyxTQUFQLENBQWlCSixJQUFJLENBQUNDLGFBQXRCLElBQXVDRSxNQUFNLENBQUNILElBQUksQ0FBQ0MsYUFBTixDQUE3QyxHQUFvRSxDQUFsRjtBQUNBLFdBQU9GLEdBQUcsR0FBR0csS0FBYjtBQUNELEdBSkQsRUFJRyxDQUpILENBRDhCO0FBQUEsQ0FBaEM7O0FBMkJBLElBQU1HLFlBQXdCLEdBQUcsU0FBM0JBLFlBQTJCLE9BTXRCO0FBQUEsTUFMVEMsUUFLUyxRQUxUQSxRQUtTO0FBQUEsTUFKVFQsS0FJUyxRQUpUQSxLQUlTO0FBQUEsTUFIVFUsWUFHUyxRQUhUQSxZQUdTO0FBQUEsTUFGVEMsUUFFUyxRQUZUQSxRQUVTO0FBQUEsdUJBRFRDLElBQ1M7QUFBQSxNQURGQyxJQUNFLGFBREZBLElBQ0U7QUFBQSxNQURPQyxRQUNQOztBQUFBLHdCQUNHLDJCQUFlQyxjQUFmLENBREg7QUFBQSxNQUNGQyxDQURFLG1CQUNGQSxDQURFOztBQUFBLGtCQUVtQixxQkFBUyxJQUFULENBRm5CO0FBQUE7QUFBQSxNQUVGQyxNQUZFO0FBQUEsTUFFTUMsU0FGTjs7QUFJVCxNQUFNQyxtQkFBbUIsR0FBRyxTQUF0QkEsbUJBQXNCO0FBQUEsV0FBTUQsU0FBUyxDQUFDLFVBQUFFLENBQUM7QUFBQSxhQUFJLENBQUNBLENBQUw7QUFBQSxLQUFGLENBQWY7QUFBQSxHQUE1Qjs7QUFFQSxNQUFNQyxtQkFBbUIsR0FBR3RCLGtCQUFrQixDQUFDQyxLQUFELENBQWxCLEdBQTRCRCxrQkFBa0IsQ0FBQ1csWUFBWSxJQUFJLEVBQWpCLENBQTFFO0FBRUEsU0FDRSxnQ0FBQyxxQkFBRCxRQUNFLGdDQUFDLHdCQUFEO0FBQVksSUFBQSxNQUFNLEVBQUVPO0FBQXBCLEtBQ0UsZ0NBQUMscUJBQUQ7QUFBVyxJQUFBLE1BQU0sRUFBRSxDQUFDQSxNQUFwQjtBQUE0QixJQUFBLE9BQU8sRUFBRUU7QUFBckMsSUFERixFQUVHRSxtQkFBbUIsR0FBRyxDQUF0QixJQUNDLGdDQUFDLGtDQUFEO0FBQXFCLElBQUEsT0FBTyxFQUFFRixtQkFBOUI7QUFBbUQsSUFBQSxNQUFNLEVBQUUsQ0FBQ0Y7QUFBNUQsS0FDR0ksbUJBREgsQ0FISixFQU9FLGdDQUFDLGdCQUFEO0FBQU0sSUFBQSxJQUFJLEVBQUVQLFFBQVo7QUFBc0IsSUFBQSxJQUFJLEVBQUVEO0FBQTVCLElBUEYsRUFRRSxnQ0FBQyx5QkFBRDtBQUFhLElBQUEsTUFBTSxFQUFFLENBQUNJO0FBQXRCLEtBQ0UsZ0NBQUMsbUJBQUQ7QUFBTyxJQUFBLE9BQU8sTUFBZDtBQUFlLGtCQUFZRCxDQUFDLENBQUMsb0JBQUQ7QUFBNUIsS0FDR2hCLEtBQUssQ0FBQ3NCLEdBQU4sQ0FBVSxVQUFDbkIsSUFBRCxFQUFPb0IsQ0FBUDtBQUFBLFdBQ1QsZ0NBQUMsZ0JBQUQ7QUFBTSxNQUFBLEdBQUcsRUFBRUEsQ0FBWDtBQUFjLE1BQUEsSUFBSSxFQUFFcEIsSUFBcEI7QUFBMEIsTUFBQSxhQUFhLEVBQUVnQjtBQUF6QyxNQURTO0FBQUEsR0FBVixDQURILENBREYsRUFNR1QsWUFBWSxJQUNYLGdDQUFDLG1CQUFEO0FBQU8sa0JBQVlNLENBQUMsQ0FBQyxvQkFBRDtBQUFwQixLQUNHTixZQUFZLElBQ1hBLFlBQVksQ0FBQ1ksR0FBYixDQUFpQixVQUFDbkIsSUFBRCxFQUFPb0IsQ0FBUDtBQUFBLFdBQ2YsZ0NBQUMsZ0JBQUQ7QUFBTSxNQUFBLEdBQUcsRUFBRUEsQ0FBWDtBQUFjLE1BQUEsSUFBSSxFQUFFcEIsSUFBcEI7QUFBMEIsTUFBQSxhQUFhLEVBQUVnQjtBQUF6QyxNQURlO0FBQUEsR0FBakIsQ0FGSixDQVBKLEVBY0dSLFFBQVEsSUFDUCxnQ0FBQyxtQkFBRDtBQUFPLGtCQUFZSyxDQUFDLENBQUMsV0FBRDtBQUFwQixLQUNFLGdDQUFDLG9CQUFEO0FBQ0UsSUFBQSxJQUFJLEVBQUVMLFFBQVEsQ0FBQ2EsSUFEakI7QUFFRSxJQUFBLEtBQUssRUFBRWIsUUFBUSxDQUFDWCxLQUZsQjtBQUdFLElBQUEsYUFBYSxFQUFFbUI7QUFIakIsSUFERixDQWZKLENBUkYsQ0FERixFQWtDRSxnQ0FBQyw4QkFBRDtBQUFrQixJQUFBLE1BQU0sRUFBRUY7QUFBMUIsS0FBbUNSLFFBQW5DLENBbENGLENBREY7QUFzQ0QsQ0FwREQ7O2VBc0RlRCxZIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7U0ZDLCB1c2VTdGF0ZX0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IGVuIGZyb20gJy4vZW4nO1xuaW1wb3J0IExvZ28sIHtMb2dvVHlwZX0gZnJvbSAnLi9Mb2dvJztcbmltcG9ydCBNZW51IGZyb20gJy4vTWVudSc7XG5pbXBvcnQgSGFtYnVyZ2VyIGZyb20gJy4vSGFtYnVyZ2VyJztcbmltcG9ydCBVc2VyTWVudSBmcm9tICcuL1VzZXJNZW51JztcbmltcG9ydCB7Tm90aWZpY2F0aW9uQ291bnRlcn0gZnJvbSAnLi9Ob3RpZmljYXRpb25zJztcbmltcG9ydCB7V3JhcHBlciwgTmF2V3JhcHBlciwgTWVudXMsIE1lbnVDb250ZW50LCBDb250ZW50Q29udGFpbmVyfSBmcm9tICcuL0V6TmF2aWdhdGlvbi5zdHlsZXMnO1xuaW1wb3J0IHtMYWJlbGxlZExpbmt9IGZyb20gJy4uL0V6TGluay9FekxpbmsudHlwZXMnO1xuaW1wb3J0IHt1c2VUcmFuc2xhdGlvbn0gZnJvbSAnLi4vLi4vdXRpbHMvaG9va3MnO1xuXG5jb25zdCBjb3VudE5vdGlmaWNhdGlvbnMgPSBsaW5rcyA9PlxuICBsaW5rcy5yZWR1Y2UoKHN1bSwgbGluaykgPT4ge1xuICAgIGlmICghbGluay5ub3RpZmljYXRpb25zKSByZXR1cm4gc3VtO1xuICAgIGNvbnN0IGNvdW50ID0gTnVtYmVyLmlzSW50ZWdlcihsaW5rLm5vdGlmaWNhdGlvbnMpID8gTnVtYmVyKGxpbmsubm90aWZpY2F0aW9ucykgOiAwO1xuICAgIHJldHVybiBzdW0gKyBjb3VudDtcbiAgfSwgMCk7XG5cbnR5cGUgSG9tZUxpbmsgPSBMYWJlbGxlZExpbmsgJiB7XG4gIGxvZ28/OiBMb2dvVHlwZTtcbn07XG5cbnR5cGUgTmF2TGluayA9IExhYmVsbGVkTGluayAmIHtcbiAgbm90aWZpY2F0aW9ucz86IG51bWJlciB8ICfimIUnO1xufTtcblxudHlwZSBVc2VyTWVudSA9IHtcbiAgbGlua3M6IExhYmVsbGVkTGlua1tdO1xuICBuYW1lOiBzdHJpbmc7XG59O1xuXG50eXBlIFByb3BzID0ge1xuICBsaW5rczogTmF2TGlua1tdO1xuICB1dGlsaXR5TGlua3M/OiBOYXZMaW5rW107XG4gIHVzZXJNZW51PzogVXNlck1lbnU7XG4gIGhvbWU6IEhvbWVMaW5rO1xufTtcblxuY29uc3QgRXpOYXZpZ2F0aW9uOiBTRkM8UHJvcHM+ID0gKHtcbiAgY2hpbGRyZW4sXG4gIGxpbmtzLFxuICB1dGlsaXR5TGlua3MsXG4gIHVzZXJNZW51LFxuICBob21lOiB7bG9nbywgLi4uaG9tZUxpbmt9LFxufTogYW55KSA9PiB7XG4gIGNvbnN0IHt0fSA9IHVzZVRyYW5zbGF0aW9uKGVuKTtcbiAgY29uc3QgW2hpZGRlbiwgc2V0SGlkZGVuXSA9IHVzZVN0YXRlKHRydWUpO1xuXG4gIGNvbnN0IGhhbmRsZVNpZGViYXJUb2dnbGUgPSAoKSA9PiBzZXRIaWRkZW4ocyA9PiAhcyk7XG5cbiAgY29uc3Qgbm90aWZpY2F0aW9uU3VtbWFyeSA9IGNvdW50Tm90aWZpY2F0aW9ucyhsaW5rcykgKyBjb3VudE5vdGlmaWNhdGlvbnModXRpbGl0eUxpbmtzIHx8IFtdKTtcblxuICByZXR1cm4gKFxuICAgIDxXcmFwcGVyPlxuICAgICAgPE5hdldyYXBwZXIgb3BlbmVkPXtoaWRkZW59PlxuICAgICAgICA8SGFtYnVyZ2VyIG9wZW5lZD17IWhpZGRlbn0gb25DbGljaz17aGFuZGxlU2lkZWJhclRvZ2dsZX0gLz5cbiAgICAgICAge25vdGlmaWNhdGlvblN1bW1hcnkgPiAwICYmIChcbiAgICAgICAgICA8Tm90aWZpY2F0aW9uQ291bnRlciBvbkNsaWNrPXtoYW5kbGVTaWRlYmFyVG9nZ2xlfSBvcGVuZWQ9eyFoaWRkZW59PlxuICAgICAgICAgICAge25vdGlmaWNhdGlvblN1bW1hcnl9XG4gICAgICAgICAgPC9Ob3RpZmljYXRpb25Db3VudGVyPlxuICAgICAgICApfVxuICAgICAgICA8TG9nbyBsaW5rPXtob21lTGlua30gbG9nbz17bG9nb30gLz5cbiAgICAgICAgPE1lbnVDb250ZW50IG9wZW5lZD17IWhpZGRlbn0+XG4gICAgICAgICAgPE1lbnVzIHByaW1hcnkgYXJpYS1sYWJlbD17dCgnUHJpbWFyeSBuYXZpZ2F0aW9uJyl9PlxuICAgICAgICAgICAge2xpbmtzLm1hcCgobGluaywgaSkgPT4gKFxuICAgICAgICAgICAgICA8TWVudSBrZXk9e2l9IGxpbms9e2xpbmt9IHNpZGViYXJUb2dnbGU9e2hhbmRsZVNpZGViYXJUb2dnbGV9IC8+XG4gICAgICAgICAgICApKX1cbiAgICAgICAgICA8L01lbnVzPlxuICAgICAgICAgIHt1dGlsaXR5TGlua3MgJiYgKFxuICAgICAgICAgICAgPE1lbnVzIGFyaWEtbGFiZWw9e3QoJ1V0aWxpdHkgbmF2aWdhdGlvbicpfT5cbiAgICAgICAgICAgICAge3V0aWxpdHlMaW5rcyAmJlxuICAgICAgICAgICAgICAgIHV0aWxpdHlMaW5rcy5tYXAoKGxpbmssIGkpID0+IChcbiAgICAgICAgICAgICAgICAgIDxNZW51IGtleT17aX0gbGluaz17bGlua30gc2lkZWJhclRvZ2dsZT17aGFuZGxlU2lkZWJhclRvZ2dsZX0gLz5cbiAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgIDwvTWVudXM+XG4gICAgICAgICAgKX1cbiAgICAgICAgICB7dXNlck1lbnUgJiYgKFxuICAgICAgICAgICAgPE1lbnVzIGFyaWEtbGFiZWw9e3QoJ1VzZXIgbWVudScpfT5cbiAgICAgICAgICAgICAgPFVzZXJNZW51XG4gICAgICAgICAgICAgICAgbmFtZT17dXNlck1lbnUubmFtZX1cbiAgICAgICAgICAgICAgICBsaW5rcz17dXNlck1lbnUubGlua3N9XG4gICAgICAgICAgICAgICAgc2lkZWJhclRvZ2dsZT17aGFuZGxlU2lkZWJhclRvZ2dsZX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvTWVudXM+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9NZW51Q29udGVudD5cbiAgICAgIDwvTmF2V3JhcHBlcj5cbiAgICAgIDxDb250ZW50Q29udGFpbmVyIG9wZW5lZD17aGlkZGVufT57Y2hpbGRyZW59PC9Db250ZW50Q29udGFpbmVyPlxuICAgIDwvV3JhcHBlcj5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEV6TmF2aWdhdGlvbjtcbiJdfQ==