"use strict";

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

var _react = _interopRequireWildcard(require("react"));

var _LinkButton = _interopRequireDefault(require("./LinkButton"));

var _ = require("..");

var _Tabs = require("./Tabs");

var _EzPageHeader = require("./EzPageHeader.styles");

var _EzAppLayout = require("../EzAppLayout/EzAppLayout");

var _styled = _interopRequireDefault(require("../../themes/styled"));

var _utils = require("../../utils");

var StyledHeading =
/*#__PURE__*/
(0, _styled["default"])("div", {
  target: "e2x45wq0"
})(_EzPageHeader.base);
var StyledActions =
/*#__PURE__*/
(0, _styled["default"])("div", {
  target: "e2x45wq1"
})(_EzPageHeader.actions);

var handleKeyDown = function handleKeyDown(refs, _ref) {
  var tabs = _ref.tabs,
      selected = _ref.selected;
  return function (event) {
    var selectedIndex = selected ? tabs.findIndex(function (link) {
      return link === selected;
    }) : 0;
    var count = tabs.length;
    var nextIndex;

    switch (event.key) {
      case 'ArrowDown':
      case 'ArrowRight':
        {
          nextIndex = (selectedIndex + 1) % count;
          break;
        }

      case 'ArrowUp':
      case 'ArrowLeft':
        {
          nextIndex = (selectedIndex - 1 + count) % count;
          break;
        }

      default:
        break;
    }

    if (nextIndex === undefined) return;
    var el = refs[nextIndex];
    el.current.click();
    el.current.focus();
  };
};
/**
 * EzPageHeader is used to build the outer structure of a page including the page title and associated actions.
 */


var EzPageHeader = function EzPageHeader(_ref2) {
  var actions = _ref2.actions,
      breadcrumb = _ref2.breadcrumb,
      status = _ref2.status,
      title = _ref2.title,
      subnav = _ref2.subnav;
  var refs = (0, _react.useRef)(subnav && subnav.tabs.map(function () {
    return (0, _react.createRef)();
  })).current;
  var selected = subnav && subnav.selected;
  return _react["default"].createElement(StyledHeading, {
    subnav: subnav
  }, _react["default"].createElement(_EzAppLayout.MaxWidth, null, _react["default"].createElement(_.EzLayout, {
    layout: {
      base: 'stack',
      medium: 'equal'
    }
  }, _react["default"].createElement("div", null, breadcrumb && _react["default"].createElement(_LinkButton["default"], (0, _extends2["default"])({}, breadcrumb, {
    label: "\u2190 ".concat(breadcrumb.label)
  })), _react["default"].createElement(_.EzLayout, {
    layout: {
      base: 'stack',
      medium: 'basic'
    }
  }, _react["default"].createElement(_.EzHeading, {
    size: "1"
  }, title), _react["default"].createElement("div", null, status))), actions && _react["default"].createElement(StyledActions, null, actions))), subnav && _react["default"].createElement(_EzAppLayout.MaxWidth, null, _react["default"].createElement(_Tabs.TabList, {
    onKeyDown: handleKeyDown(refs, subnav)
  }, subnav.tabs.map(function (tab, i) {
    return _react["default"].createElement(_Tabs.Tab, (0, _extends2["default"])({
      ref: refs[i],
      key: tab.label,
      tabIndex: !selected && i === 0 || selected === tab ? 0 : -1,
      active: selected === tab
    }, tab, {
      onClick: (0, _utils.wrapEvent)(tab.onClick, function () {
        return subnav.onChange && subnav.onChange(tab);
      })
    }));
  }))));
};
/**
 * @component
 */


var _default = EzPageHeader;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21wb25lbnRzL0V6UGFnZUhlYWRlci9FelBhZ2VIZWFkZXIudHN4Il0sIm5hbWVzIjpbIlN0eWxlZEhlYWRpbmciLCJzdHlsZWQiLCJiYXNlIiwiU3R5bGVkQWN0aW9ucyIsImFjdGlvblN0eWxlcyIsImhhbmRsZUtleURvd24iLCJyZWZzIiwidGFicyIsInNlbGVjdGVkIiwiZXZlbnQiLCJzZWxlY3RlZEluZGV4IiwiZmluZEluZGV4IiwibGluayIsImNvdW50IiwibGVuZ3RoIiwibmV4dEluZGV4Iiwia2V5IiwidW5kZWZpbmVkIiwiZWwiLCJjdXJyZW50IiwiY2xpY2siLCJmb2N1cyIsIkV6UGFnZUhlYWRlciIsImFjdGlvbnMiLCJicmVhZGNydW1iIiwic3RhdHVzIiwidGl0bGUiLCJzdWJuYXYiLCJtYXAiLCJtZWRpdW0iLCJsYWJlbCIsInRhYiIsImkiLCJvbkNsaWNrIiwib25DaGFuZ2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFFQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFxQkEsSUFBTUEsYUFBYTtBQUFBO0FBQUEsSUFBR0Msa0JBQUg7QUFBQTtBQUFBLEdBQWlDQyxrQkFBakMsQ0FBbkI7QUFDQSxJQUFNQyxhQUFhO0FBQUE7QUFBQSxJQUFHRixrQkFBSDtBQUFBO0FBQUEsR0FBY0cscUJBQWQsQ0FBbkI7O0FBRUEsSUFBTUMsYUFBYSxHQUFHLFNBQWhCQSxhQUFnQixDQUFDQyxJQUFEO0FBQUEsTUFBd0NDLElBQXhDLFFBQXdDQSxJQUF4QztBQUFBLE1BQThDQyxRQUE5QyxRQUE4Q0EsUUFBOUM7QUFBQSxTQUFvRSxVQUFBQyxLQUFLLEVBQUk7QUFDakcsUUFBTUMsYUFBYSxHQUFHRixRQUFRLEdBQUdELElBQUksQ0FBQ0ksU0FBTCxDQUFlLFVBQUFDLElBQUk7QUFBQSxhQUFJQSxJQUFJLEtBQUtKLFFBQWI7QUFBQSxLQUFuQixDQUFILEdBQStDLENBQTdFO0FB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LE9BS01BLEdBTE47QUFNRSxNQUFBLE9BQU8sRUFBRSxzQkFBVUEsR0FBRyxDQUFDRSxPQUFkLEVBQXVCO0FBQUEsZUFBTU4sTUFBTSxDQUFDTyxRQUFQLElBQW1CUCxNQUFNLENBQUNPLFFBQVAsQ0FBZ0JILEdBQWhCLENBQXpCO0FBQUEsT0FBdkI7QUFOWCxPQURlO0FBQUEsR0FBaEIsQ0FESCxDQURGLENBeEJKLENBREY7QUEwQ0QsQ0E3Q0Q7QUErQ0E7Ozs7O2VBR2VULFkiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHtjcmVhdGVSZWYsIHVzZVJlZn0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IExpbmtCdXR0b24gZnJvbSAnLi9MaW5rQnV0dG9uJztcbmltcG9ydCB7TGluaywgTGFiZWxsZWRMaW5rLCBMYWJlbGxlZH0gZnJvbSAnLi4vRXpMaW5rL0V6TGluay50eXBlcyc7XG5pbXBvcnQge0V6SGVhZGluZywgRXpMYXlvdXR9IGZyb20gJy4uJztcbmltcG9ydCB7VGFiLCBUYWJMaXN0fSBmcm9tICcuL1RhYnMnO1xuaW1wb3J0IHtiYXNlLCBhY3Rpb25zIGFzIGFjdGlvblN0eWxlc30gZnJvbSAnLi9FelBhZ2VIZWFkZXIuc3R5bGVzJztcbmltcG9ydCB7TWF4V2lkdGh9IGZyb20gJy4uL0V6QXBwTGF5b3V0L0V6QXBwTGF5b3V0JztcbmltcG9ydCBzdHlsZWQgZnJvbSAnLi4vLi4vdGhlbWVzL3N0eWxlZCc7XG5pbXBvcnQge3dyYXBFdmVudH0gZnJvbSAnLi4vLi4vdXRpbHMnO1xuXG50eXBlIFRhYlR5cGUgPSBMYWJlbGxlZCB8IChMYWJlbGxlZCAmIExpbmspO1xuXG50eXBlIENoYW5nZWFibGUgPSB7b25DaGFuZ2U6ICh0YWI6IFRhYlR5cGUpID0+IHZvaWR9O1xuXG50eXBlIFN1Yk5hdlByb3BzPFQ+ID0gKFQgZXh0ZW5kcyBMaW5rID8gUGFydGlhbDxDaGFuZ2VhYmxlPiA6IENoYW5nZWFibGUpICYge1xuICB0YWJzOiBUW107XG4gIHNlbGVjdGVkPzogVDtcbn07XG5cbnR5cGUgU3ViTmF2ID0gU3ViTmF2UHJvcHM8VGFiVHlwZT47XG5cbnR5cGUgSGVhZGVyUHJvcHMgPSB7XG4gIGFjdGlvbnM/OiBSZWFjdC5SZWFjdE5vZGU7XG4gIGJyZWFkY3J1bWI/OiBMYWJlbGxlZExpbms7XG4gIHN0YXR1cz86IFJlYWN0LlJlYWN0Tm9kZTtcbiAgdGl0bGU6IHN0cmluZztcbiAgc3VibmF2PzogU3ViTmF2O1xufTtcblxuY29uc3QgU3R5bGVkSGVhZGluZyA9IHN0eWxlZC5kaXY8e3N1Ym5hdj86IFN1Yk5hdn0+KGJhc2UgYXMgYW55KTtcbmNvbnN0IFN0eWxlZEFjdGlvbnMgPSBzdHlsZWQuZGl2KGFjdGlvblN0eWxlcyBhcyBhbnkpO1xuXG5jb25zdCBoYW5kbGVLZXlEb3duID0gKHJlZnM6IFJlYWN0LlJlZk9iamVjdDxIVE1MRWxlbWVudD5bXSwge3RhYnMsIHNlbGVjdGVkfTogU3ViTmF2KSA9PiBldmVudCA9PiB7XG4gIGNvbnN0IHNlbGVjdGVkSW5kZXggPSBzZWxlY3RlZCA/IHRhYnMuZmluZEluZGV4KGxpbmsgPT4gbGluayA9PT0gc2VsZWN0ZWQpIDogMDtcblxuICBjb25zdCBjb3VudCA9IHRhYnMubGVuZ3RoO1xuICBsZXQgbmV4dEluZGV4O1xuXG4gIHN3aXRjaCAoZXZlbnQua2V5KSB7XG4gICAgY2FzZSAnQXJyb3dEb3duJzpcbiAgICBjYXNlICdBcnJvd1JpZ2h0Jzoge1xuICAgICAgbmV4dEluZGV4ID0gKHNlbGVjdGVkSW5kZXggKyAxKSAlIGNvdW50O1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGNhc2UgJ0Fycm93VXAnOlxuICAgIGNhc2UgJ0Fycm93TGVmdCc6IHtcbiAgICAgIG5leHRJbmRleCA9IChzZWxlY3RlZEluZGV4IC0gMSArIGNvdW50KSAlIGNvdW50O1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGRlZmF1bHQ6XG4gICAgICBicmVhaztcbiAgfVxuXG4gIGlmIChuZXh0SW5kZXggPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuXG4gIGNvbnN0IGVsID0gcmVmc1tuZXh0SW5kZXhdO1xuXG4gIGVsLmN1cnJlbnQuY2xpY2soKTtcbiAgZWwuY3VycmVudC5mb2N1cygpO1xufTtcblxuLyoqXG4gKiBFelBhZ2VIZWFkZXIgaXMgdXNlZCB0byBidWlsZCB0aGUgb3V0ZXIgc3RydWN0dXJlIG9mIGEgcGFnZSBpbmNsdWRpbmcgdGhlIHBhZ2UgdGl0bGUgYW5kIGFzc29jaWF0ZWQgYWN0aW9ucy5cbiAqL1xuY29uc3QgRXpQYWdlSGVhZGVyOiBSZWFjdC5GQzxIZWFkZXJQcm9wcz4gPSAoe2FjdGlvbnMsIGJyZWFkY3J1bWIsIHN0YXR1cywgdGl0bGUsIHN1Ym5hdn0pID0+IHtcbiAgY29uc3QgcmVmcyA9IHVzZVJlZihzdWJuYXYgJiYgc3VibmF2LnRhYnMubWFwKCgpID0+IGNyZWF0ZVJlZjxIVE1MRWxlbWVudD4oKSkpLmN1cnJlbnQ7XG4gIGNvbnN0IHNlbGVjdGVkID0gc3VibmF2ICYmIHN1Ym5hdi5zZWxlY3RlZDtcbiAgcmV0dXJuIChcbiAgICA8U3R5bGVkSGVhZGluZyBzdWJuYXY9e3N1Ym5hdn0+XG4gICAgICA8TWF4V2lkdGg+XG4gICAgICAgIDxFekxheW91dFxuICAgICAgICAgIGxheW91dD17e1xuICAgICAgICAgICAgYmFzZTogJ3N0YWNrJyxcbiAgICAgICAgICAgIG1lZGl1bTogJ2VxdWFsJyxcbiAgICAgICAgICB9fVxuICAgICAgICA+XG4gICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIHticmVhZGNydW1iICYmIDxMaW5rQnV0dG9uIHsuLi5icmVhZGNydW1ifSBsYWJlbD17YOKGkCAke2JyZWFkY3J1bWIubGFiZWx9YH0gLz59XG4gICAgICAgICAgICA8RXpMYXlvdXRcbiAgICAgICAgICAgICAgbGF5b3V0PXt7XG4gICAgICAgICAgICAgICAgYmFzZTogJ3N0YWNrJyxcbiAgICAgICAgICAgICAgICBtZWRpdW06ICdiYXNpYycsXG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDxFekhlYWRpbmcgc2l6ZT1cIjFcIj57dGl0bGV9PC9FekhlYWRpbmc+XG4gICAgICAgICAgICAgIDxkaXY+e3N0YXR1c308L2Rpdj5cbiAgICAgICAgICAgIDwvRXpMYXlvdXQ+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAge2FjdGlvbnMgJiYgPFN0eWxlZEFjdGlvbnM+e2FjdGlvbnN9PC9TdHlsZWRBY3Rpb25zPn1cbiAgICAgICAgPC9FekxheW91dD5cbiAgICAgIDwvTWF4V2lkdGg+XG4gICAgICB7c3VibmF2ICYmIChcbiAgICAgICAgPE1heFdpZHRoPlxuICAgICAgICAgIDxUYWJMaXN0IG9uS2V5RG93bj17aGFuZGxlS2V5RG93bihyZWZzLCBzdWJuYXYpfT5cbiAgICAgICAgICAgIHtzdWJuYXYudGFicy5tYXAoKHRhYiwgaSkgPT4gKFxuICAgICAgICAgICAgICA8VGFiXG4gICAgICAgICAgICAgICAgcmVmPXtyZWZzW2ldfVxuICAgICAgICAgICAgICAgIGtleT17dGFiLmxhYmVsfVxuICAgICAgICAgICAgICAgIHRhYkluZGV4PXsoIXNlbGVjdGVkICYmIGkgPT09IDApIHx8IHNlbGVjdGVkID09PSB0YWIgPyAwIDogLTF9XG4gICAgICAgICAgICAgICAgYWN0aXZlPXtzZWxlY3RlZCA9PT0gdGFifVxuICAgICAgICAgICAgICAgIHsuLi50YWJ9XG4gICAgICAgICAgICAgICAgb25DbGljaz17d3JhcEV2ZW50KHRhYi5vbkNsaWNrLCAoKSA9PiBzdWJuYXYub25DaGFuZ2UgJiYgc3VibmF2Lm9uQ2hhbmdlKHRhYikpfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKSl9XG4gICAgICAgICAgPC9UYWJMaXN0PlxuICAgICAgICA8L01heFdpZHRoPlxuICAgICAgKX1cbiAgICA8L1N0eWxlZEhlYWRpbmc+XG4gICk7XG59O1xuXG4vKipcbiAqIEBjb21wb25lbnRcbiAqL1xuZXhwb3J0IGRlZmF1bHQgRXpQYWdlSGVhZGVyO1xuIl19