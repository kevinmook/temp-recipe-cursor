"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));

var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));

var _core = require("@popperjs/core");

var _react = require("react");

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2["default"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

var _default = function _default() {
  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  var referenceRef = (0, _react.useRef)();
  var popperRef = (0, _react.useRef)();
  var instanceRef = (0, _react.useRef)();
  var combinedOptions = (0, _react.useMemo)(function () {
    var _options$modifiers = options.modifiers,
        modifiers = _options$modifiers === void 0 ? [] : _options$modifiers;
    return _objectSpread({}, options, {
      modifiers: [].concat((0, _toConsumableArray2["default"])(modifiers), [{
        name: 'preventOverflow',
        options: {
          padding: 8
        }
      }])
    });
  }, [options]);
  (0, _react.useLayoutEffect)(function () {
    var instance = (0, _core.createPopper)(referenceRef.current, popperRef.current, combinedOptions);
    instanceRef.current = instance;
    return function () {
      instance.destroy();
    };
  }, [combinedOptions]);
  (0, _react.useLayoutEffect)(function () {
    instanceRef.current.setOptions(combinedOptions);
    instanceRef.current.update();
  }, [combinedOptions]);
  return {
    reference: referenceRef,
    popper: popperRef,
    instance: instanceRef
  };
};

exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy91dGlscy9ob29rcy91c2VQb3BwZXIudHMiXSwibmFtZXMiOlsib3B0aW9ucyIsInJlZmVyZW5jZVJlZiIsInBvcHBlclJlZiIsImluc3RhbmNlUmVmIiwiY29tYmluZWRPcHRpb25zIiwibW9kaWZpZXJzIiwibmFtZSIsInBhZGRpbmciLCJpbnN0YW5jZSIsImN1cnJlbnQiLCJkZXN0cm95Iiwic2V0T3B0aW9ucyIsInVwZGF0ZSIsInJlZmVyZW5jZSIsInBvcHBlciJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFBOztBQUNBOzs7Ozs7ZUFFZSxvQkFBb0M7QUFBQSxNQUFuQ0EsT0FBbUMsdUVBQVAsRUFBTztBQUNqRCxNQUFNQyxZQUFZLEdBQUcsb0JBQXJCO0FBQ0EsTUFBTUMsU0FBUyxHQUFHLG9CQUFsQjtBQUNBLE1BQU1DLFdBQVcsR0FBRyxvQkFBcEI7QUFFQSxNQUFNQyxlQUFlLEdBQUcsb0JBQVEsWUFBTTtBQUFBLDZCQUNYSixPQURXLENBQzdCSyxTQUQ2QjtBQUFBLFFBQzdCQSxTQUQ2QixtQ0FDakIsRUFEaUI7QUFFcEMsNkJBQ0tMLE9BREw7QUFFRUssTUFBQUEsU0FBUyxnREFBTUEsU0FBTixJQUFpQjtBQUFDQyxRQUFBQSxJQUFJLEVBQUUsaUJBQVA7QUFBMEJOLFFBQUFBLE9BQU8sRUFBRTtBQUFDTyxVQUFBQSxPQUFPLEVBQUU7QUFBVjtBQUFuQyxPQUFqQjtBQUZYO0FBSUQsR0FOdUIsRUFNckIsQ0FBQ1AsT0FBRCxDQU5xQixDQUF4QjtBQVFBLDhCQUFnQixZQUFNO0FBQ3BCLFFBQU1RLFFBQVEsR0FBRyx3QkFBYVAsWUFBWSxDQUFDUSxPQUExQixFQUFtQ1AsU0FBUyxDQUFDTyxPQUE3QyxFQUFzREwsZUFBdEQsQ0FBakI7QUFFQUQsSUFBQUEsV0FBVyxDQUFDTSxPQUFaLEdBQXNCRCxRQUF0QjtBQUVBLFdBQU8sWUFBTTtBQUNYQSxNQUFBQSxRQUFRLENBQUNFLE9BQVQ7QUFDRCxLQUZEO0FBR0QsR0FSRCxFQVFHLENBQUNOLGVBQUQsQ0FSSDtBQVVBLDhCQUFnQixZQUFNO0FBQ3BCRCxJQUFBQSxXQUFXLENBQUNNLE9BQVosQ0FBb0JFLFVBQXBCLENBQStCUCxlQUEvQjtBQUNBRCxJQUFBQSxXQUFXLENBQUNNLE9BQVosQ0FBb0JHLE1BQXBCO0FBQ0QsR0FIRCxFQUdHLENBQUNSLGVBQUQsQ0FISDtBQUtBLFNBQU87QUFDTFMsSUFBQUEsU0FBUyxFQUFFWixZQUROO0FBRUxhLElBQUFBLE1BQU0sRUFBRVosU0FGSDtBQUdMTSxJQUFBQSxRQUFRLEVBQUVMO0FBSEwsR0FBUDtBQUtELEMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge2NyZWF0ZVBvcHBlciwgSW5zdGFuY2UsIE9wdGlvbnN9IGZyb20gJ0Bwb3BwZXJqcy9jb3JlJztcbmltcG9ydCB7dXNlUmVmLCB1c2VNZW1vLCB1c2VMYXlvdXRFZmZlY3R9IGZyb20gJ3JlYWN0JztcblxuZXhwb3J0IGRlZmF1bHQgKG9wdGlvbnM6IFBhcnRpYWw8T3B0aW9ucz4gPSB7fSkgPT4ge1xuICBjb25zdCByZWZlcmVuY2VSZWYgPSB1c2VSZWY8SFRNTEVsZW1lbnQ+KCk7XG4gIGNvbnN0IHBvcHBlclJlZiA9IHVzZVJlZjxIVE1MRWxlbWVudD4oKTtcbiAgY29uc3QgaW5zdGFuY2VSZWYgPSB1c2VSZWY8SW5zdGFuY2U+KCk7XG5cbiAgY29uc3QgY29tYmluZWRPcHRpb25zID0gdXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3Qge21vZGlmaWVycyA9IFtdfSA9IG9wdGlvbnM7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgICBtb2RpZmllcnM6IFsuLi5tb2RpZmllcnMsIHtuYW1lOiAncHJldmVudE92ZXJmbG93Jywgb3B0aW9uczoge3BhZGRpbmc6IDh9fV0sXG4gICAgfTtcbiAgfSwgW29wdGlvbnNdKTtcblxuICB1c2VMYXlvdXRFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGluc3RhbmNlID0gY3JlYXRlUG9wcGVyKHJlZmVyZW5jZVJlZi5jdXJyZW50LCBwb3BwZXJSZWYuY3VycmVudCwgY29tYmluZWRPcHRpb25zKTtcblxuICAgIGluc3RhbmNlUmVmLmN1cnJlbnQgPSBpbnN0YW5jZTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpbnN0YW5jZS5kZXN0cm95KCk7XG4gICAgfTtcbiAgfSwgW2NvbWJpbmVkT3B0aW9uc10pO1xuXG4gIHVzZUxheW91dEVmZmVjdCgoKSA9PiB7XG4gICAgaW5zdGFuY2VSZWYuY3VycmVudC5zZXRPcHRpb25zKGNvbWJpbmVkT3B0aW9ucyk7XG4gICAgaW5zdGFuY2VSZWYuY3VycmVudC51cGRhdGUoKTtcbiAgfSwgW2NvbWJpbmVkT3B0aW9uc10pO1xuXG4gIHJldHVybiB7XG4gICAgcmVmZXJlbmNlOiByZWZlcmVuY2VSZWYsXG4gICAgcG9wcGVyOiBwb3BwZXJSZWYsXG4gICAgaW5zdGFuY2U6IGluc3RhbmNlUmVmLFxuICB9O1xufTtcbiJdfQ==